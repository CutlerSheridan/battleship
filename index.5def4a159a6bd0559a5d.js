"use strict";(self.webpackChunkbattleship=self.webpackChunkbattleship||[]).push([[826],{890:(e,n,t)=>{t.d(n,{Z:()=>s});var r=t(537),a=t.n(r),i=t(645),o=t.n(i)()(a());o.push([e.id,":root {\n  --sunk-border-width: 5px;\n  --sunk-borders: var(--sunk-border-width) solid red;\n  --grid-space-width: 4.5rem;\n  font-size: 62.5%;\n}\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: inherit;\n  font-family: inherit;\n}\nbody {\n  height: 100%;\n  width: 100%;\n  font-size: 2rem;\n}\n.game-container {\n  display: flex;\n}\n\n.grid-unclickable {\n  pointer-events: none;\n}\n.grid-outerContainer {\n  margin: 1rem;\n  padding: 2rem;\n  background: black;\n}\n.grid-innerContainer {\n  height: 100%;\n  width: 100%;\n  display: grid;\n  grid-template: repeat(11, var(--grid-space-width)) / repeat(11, var(--grid-space-width));\n  gap: 0.5rem;\n  background: lightblue;\n}\n.grid-space {\n  position: relative;\n  display: grid;\n  justify-content: center;\n  align-items: center;\n  background: white;\n  -webkit-tap-highlight-color: rgb(0, 0, 0, 0);\n}\n@media (hover: hover) {\n  .grid-space:not([data-row='-1'], [data-col='-1']):hover {\n    background: pink;\n  }\n}\n.grid-space-occupied:not(.grid-space-secretlyOccupied) {\n  font-weight: bold;\n  background: rgb(88, 87, 87);\n  color: white;\n}\n.grid-space-empty {\n  color: transparent;\n}\n.grid-space-empty > .grid-spaceContent::after {\n  content: '';\n  position: absolute;\n  left: 35%;\n  top: 35%;\n  width: 30%;\n  height: 30%;\n  background: black;\n  border-radius: 1rem;\n}\n.grid-space-hit::after {\n  content: '';\n  position: absolute;\n  left: 25%;\n  top: 25%;\n  width: calc(var(--grid-space-width) * 0.5);\n  height: calc(var(--grid-space-width) * 0.5);\n  background: goldenrod;\n  border-radius: 5rem;\n}\n.grid-space-hit.grid-space-occupied::after,\n.grid-space-hit.grid-space-secretlyOccupied::after {\n  background: red;\n}\n.grid-sunkSpace-horizontalStart {\n  border-left: var(--sunk-borders);\n  border-top: var(--sunk-borders);\n  border-bottom: var(--sunk-borders);\n}\n.grid-sunkSpace-horizontalMiddle {\n  border-top: var(--sunk-borders);\n  border-bottom: var(--sunk-borders);\n}\n.grid-sunkSpace-horizontalEnd {\n  border-top: var(--sunk-borders);\n  border-bottom: var(--sunk-borders);\n  border-right: var(--sunk-borders);\n}\n.grid-sunkSpace-verticalStart {\n  border-top: var(--sunk-borders);\n  border-right: var(--sunk-borders);\n  border-left: var(--sunk-borders);\n}\n.grid-sunkSpace-verticalMiddle {\n  border-right: var(--sunk-borders);\n  border-left: var(--sunk-borders);\n}\n.grid-sunkSpace-verticalEnd {\n  border-right: var(--sunk-borders);\n  border-left: var(--sunk-borders);\n  border-bottom: var(--sunk-borders);\n}\n.grid-sunkSpace-horizontalStart::after,\n.grid-sunkSpace-verticalStart::after {\n  left: calc(calc(var(--grid-space-width) * 0.25) - var(--sunk-border-width));\n  top: calc(calc(var(--grid-space-width) * 0.25) - var(--sunk-border-width));\n}\n.grid-sunkSpace-horizontalMiddle::after,\n.grid-sunkSpace-horizontalEnd::after {\n  top: calc(calc(var(--grid-space-width) * 0.25) - var(--sunk-border-width));\n}\n.grid-sunkSpace-verticalMiddle::after,\n.grid-sunkSpace-verticalEnd::after {\n  left: calc(calc(var(--grid-space-width) * 0.25) - var(--sunk-border-width));\n}\n\n.ui-container {\n  margin-left: 5rem;\n  display: flex;\n  align-items: center;\n  gap: 5rem;\n}\n.ui-playerNames {\n  width: 50rem;\n  display: flex;\n  justify-content: space-around;\n  border: 3px solid pink;\n}\n.ui-name {\n  width: 15rem;\n  height: 7rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: orange;\n}\n.ui-name-current {\n  border: 10px solid purple;\n}\n.ui-playerTypeLabel {\n  cursor: pointer;\n}\n.ui-nextButton {\n  height: 7rem;\n  width: 12rem;\n}\n.ui-nextButton-unclickable {\n  color: grey;\n  pointer-events: none;\n}\n.ui-resultContainer-hidden {\n  visibility: hidden;\n}\n.ui-result {\n  color: red;\n}\n.ui-matchResult {\n  font-size: 3rem;\n  font-weight: bold;\n  color: green;\n}\n.ui-matchResult-hidden {\n  visibility: hidden;\n}\n","",{version:3,sources:["webpack://./src/styles/style.css"],names:[],mappings:"AAAA;EACE,wBAAwB;EACxB,kDAAkD;EAClD,0BAA0B;EAC1B,gBAAgB;AAClB;AACA;EACE,SAAS;EACT,UAAU;EACV,sBAAsB;EACtB,kBAAkB;EAClB,oBAAoB;AACtB;AACA;EACE,YAAY;EACZ,WAAW;EACX,eAAe;AACjB;AACA;EACE,aAAa;AACf;;AAEA;EACE,oBAAoB;AACtB;AACA;EACE,YAAY;EACZ,aAAa;EACb,iBAAiB;AACnB;AACA;EACE,YAAY;EACZ,WAAW;EACX,aAAa;EACb,wFAAwF;EACxF,WAAW;EACX,qBAAqB;AACvB;AACA;EACE,kBAAkB;EAClB,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,iBAAiB;EACjB,4CAA4C;AAC9C;AACA;EACE;IACE,gBAAgB;EAClB;AACF;AACA;EACE,iBAAiB;EACjB,2BAA2B;EAC3B,YAAY;AACd;AACA;EACE,kBAAkB;AACpB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,UAAU;EACV,WAAW;EACX,iBAAiB;EACjB,mBAAmB;AACrB;AACA;EACE,WAAW;EACX,kBAAkB;EAClB,SAAS;EACT,QAAQ;EACR,0CAA0C;EAC1C,2CAA2C;EAC3C,qBAAqB;EACrB,mBAAmB;AACrB;AACA;;EAEE,eAAe;AACjB;AACA;EACE,gCAAgC;EAChC,+BAA+B;EAC/B,kCAAkC;AACpC;AACA;EACE,+BAA+B;EAC/B,kCAAkC;AACpC;AACA;EACE,+BAA+B;EAC/B,kCAAkC;EAClC,iCAAiC;AACnC;AACA;EACE,+BAA+B;EAC/B,iCAAiC;EACjC,gCAAgC;AAClC;AACA;EACE,iCAAiC;EACjC,gCAAgC;AAClC;AACA;EACE,iCAAiC;EACjC,gCAAgC;EAChC,kCAAkC;AACpC;AACA;;EAEE,2EAA2E;EAC3E,0EAA0E;AAC5E;AACA;;EAEE,0EAA0E;AAC5E;AACA;;EAEE,2EAA2E;AAC7E;;AAEA;EACE,iBAAiB;EACjB,aAAa;EACb,mBAAmB;EACnB,SAAS;AACX;AACA;EACE,YAAY;EACZ,aAAa;EACb,6BAA6B;EAC7B,sBAAsB;AACxB;AACA;EACE,YAAY;EACZ,YAAY;EACZ,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,kBAAkB;AACpB;AACA;EACE,yBAAyB;AAC3B;AACA;EACE,eAAe;AACjB;AACA;EACE,YAAY;EACZ,YAAY;AACd;AACA;EACE,WAAW;EACX,oBAAoB;AACtB;AACA;EACE,kBAAkB;AACpB;AACA;EACE,UAAU;AACZ;AACA;EACE,eAAe;EACf,iBAAiB;EACjB,YAAY;AACd;AACA;EACE,kBAAkB;AACpB",sourcesContent:[":root {\n  --sunk-border-width: 5px;\n  --sunk-borders: var(--sunk-border-width) solid red;\n  --grid-space-width: 4.5rem;\n  font-size: 62.5%;\n}\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n  font-size: inherit;\n  font-family: inherit;\n}\nbody {\n  height: 100%;\n  width: 100%;\n  font-size: 2rem;\n}\n.game-container {\n  display: flex;\n}\n\n.grid-unclickable {\n  pointer-events: none;\n}\n.grid-outerContainer {\n  margin: 1rem;\n  padding: 2rem;\n  background: black;\n}\n.grid-innerContainer {\n  height: 100%;\n  width: 100%;\n  display: grid;\n  grid-template: repeat(11, var(--grid-space-width)) / repeat(11, var(--grid-space-width));\n  gap: 0.5rem;\n  background: lightblue;\n}\n.grid-space {\n  position: relative;\n  display: grid;\n  justify-content: center;\n  align-items: center;\n  background: white;\n  -webkit-tap-highlight-color: rgb(0, 0, 0, 0);\n}\n@media (hover: hover) {\n  .grid-space:not([data-row='-1'], [data-col='-1']):hover {\n    background: pink;\n  }\n}\n.grid-space-occupied:not(.grid-space-secretlyOccupied) {\n  font-weight: bold;\n  background: rgb(88, 87, 87);\n  color: white;\n}\n.grid-space-empty {\n  color: transparent;\n}\n.grid-space-empty > .grid-spaceContent::after {\n  content: '';\n  position: absolute;\n  left: 35%;\n  top: 35%;\n  width: 30%;\n  height: 30%;\n  background: black;\n  border-radius: 1rem;\n}\n.grid-space-hit::after {\n  content: '';\n  position: absolute;\n  left: 25%;\n  top: 25%;\n  width: calc(var(--grid-space-width) * 0.5);\n  height: calc(var(--grid-space-width) * 0.5);\n  background: goldenrod;\n  border-radius: 5rem;\n}\n.grid-space-hit.grid-space-occupied::after,\n.grid-space-hit.grid-space-secretlyOccupied::after {\n  background: red;\n}\n.grid-sunkSpace-horizontalStart {\n  border-left: var(--sunk-borders);\n  border-top: var(--sunk-borders);\n  border-bottom: var(--sunk-borders);\n}\n.grid-sunkSpace-horizontalMiddle {\n  border-top: var(--sunk-borders);\n  border-bottom: var(--sunk-borders);\n}\n.grid-sunkSpace-horizontalEnd {\n  border-top: var(--sunk-borders);\n  border-bottom: var(--sunk-borders);\n  border-right: var(--sunk-borders);\n}\n.grid-sunkSpace-verticalStart {\n  border-top: var(--sunk-borders);\n  border-right: var(--sunk-borders);\n  border-left: var(--sunk-borders);\n}\n.grid-sunkSpace-verticalMiddle {\n  border-right: var(--sunk-borders);\n  border-left: var(--sunk-borders);\n}\n.grid-sunkSpace-verticalEnd {\n  border-right: var(--sunk-borders);\n  border-left: var(--sunk-borders);\n  border-bottom: var(--sunk-borders);\n}\n.grid-sunkSpace-horizontalStart::after,\n.grid-sunkSpace-verticalStart::after {\n  left: calc(calc(var(--grid-space-width) * 0.25) - var(--sunk-border-width));\n  top: calc(calc(var(--grid-space-width) * 0.25) - var(--sunk-border-width));\n}\n.grid-sunkSpace-horizontalMiddle::after,\n.grid-sunkSpace-horizontalEnd::after {\n  top: calc(calc(var(--grid-space-width) * 0.25) - var(--sunk-border-width));\n}\n.grid-sunkSpace-verticalMiddle::after,\n.grid-sunkSpace-verticalEnd::after {\n  left: calc(calc(var(--grid-space-width) * 0.25) - var(--sunk-border-width));\n}\n\n.ui-container {\n  margin-left: 5rem;\n  display: flex;\n  align-items: center;\n  gap: 5rem;\n}\n.ui-playerNames {\n  width: 50rem;\n  display: flex;\n  justify-content: space-around;\n  border: 3px solid pink;\n}\n.ui-name {\n  width: 15rem;\n  height: 7rem;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: orange;\n}\n.ui-name-current {\n  border: 10px solid purple;\n}\n.ui-playerTypeLabel {\n  cursor: pointer;\n}\n.ui-nextButton {\n  height: 7rem;\n  width: 12rem;\n}\n.ui-nextButton-unclickable {\n  color: grey;\n  pointer-events: none;\n}\n.ui-resultContainer-hidden {\n  visibility: hidden;\n}\n.ui-result {\n  color: red;\n}\n.ui-matchResult {\n  font-size: 3rem;\n  font-weight: bold;\n  color: green;\n}\n.ui-matchResult-hidden {\n  visibility: hidden;\n}\n"],sourceRoot:""}]);const s=o},789:(e,n,t)=>{var r=t(379),a=t.n(r),i=t(795),o=t.n(i),s=t(569),d=t.n(s),c=t(565),A=t.n(c),l=t(216),u=t.n(l),p=t(589),g=t.n(p),h=t(890),C={};C.styleTagTransform=g(),C.setAttributes=A(),C.insert=d().bind(null,"head"),C.domAPI=o(),C.insertStyleElement=u(),a()(h.Z,C),h.Z&&h.Z.locals&&h.Z.locals;const m=e=>{e.ships.forEach((n=>{E(n),b(e,n)}))},b=(e,n)=>{let t=k();for(;!B(e,n,...t);)t=k();e.gameboard.placeShip(n,...t)},E=e=>{0===Math.floor(2*Math.random())&&e.turnShip()},k=()=>[Math.floor(10*Math.random()),Math.floor(10*Math.random())],B=(e,n,t,r)=>{let a=t,i=r;const{grid:o}=e.gameboard;for(let e=0;e<n.length;e++){if(n.isHorizontal?i=r+e:a=t+e,i>=o.length||a>=o[0].length)return!1;if(o[a][i].ship)return!1}return!0},f=(e,n)=>{const{grid:t}=n.gameboard;let r,a,i;if(e.length>0&&(r=e.length-1,a=t[e[r].row][e[r].col]),!a||!a.ship||a.ship.isSunk()){const r=Math.floor(Math.random()*t.length),a=Math.floor(Math.random()*t.length);return t[r][a].hasBeenHit?f(e,n):[r,a]}if(e.length>1&&(i=t[e[r-1].row][e[r-1].col]),i&&i.ship&&!i.ship.isSunk()){if(i.ship===a.ship){let{row:n,col:a}=e[r],i=v(e);if(n+=i[0],a+=i[1],t[n][a]&&!t[n][a].hasBeenHit)return[n,a];i=i.map((e=>-1*e));do{n+=i[0],a+=i[1]}while(!t[n][a]||t[n][a].hasBeenHit);return[n,a]}{const t=e.filter(((e,n)=>n!==r));return f(t,n)}}{const{row:n,col:a}=e[r];for(let e=0;e<2;e++)for(let r=0;r<2;r++)if(e!==r){if(t[n+e][a+r]&&!t[n+e][a+r].hasBeenHit)return[n+e,a+r];if(t[n-e][a-r]&&!t[n-e][a-r].hasBeenHit)return[n-e,a-r]}}},v=e=>{const n=e[e.length-1],t=e[e.length-2];return[n.row-t.row,n.col-t.col]},y=(e,n="unnamed")=>{let t=!0;const r=[];for(let n=0;n<e;n++)r.push(!1);return{get isHorizontal(){return t},turnShip:()=>{t=!t},length:e,name:n,coordinates:[],hitSpaces:r,hit:e=>{r[e]=!0},isSunk:()=>-1===r.indexOf(!1)}},S=e=>{const n=(()=>{const e=[];for(let n=0;n<10;n++){e.push([]);for(let t=0;t<10;t++)e[n].push({hasBeenHit:!1})}return{grid:e,placeShip:(n,t,r)=>{let a=t,i=r;for(let o=0;o<n.length;o++)n.isHorizontal?i=r+o:a=t+o,e[a][i]={ship:n,position:o,hasBeenHit:!1},n.coordinates.push({row:a,col:i})},receiveAttack:(n,t)=>{const r=e[n][t];r.ship&&r.ship.hit(r.position),r.hasBeenHit=!0},allShipsAreSunk:()=>{const n=[];return e.forEach((e=>{e.forEach((e=>{0===e.position&&n.push(e.ship)}))})),n.every((e=>e.isSunk()))}}})();let t=!0,r=!1;const a=[y(5,"Aircraft Carrier"),y(4,"Battleship"),y(3,"Cruiser"),y(3,"Submarine"),y(2,"Destroyer")],i=[];return{gameboard:n,name:e,togglePlayerController:()=>{t=!t},get isHuman(){return t},changeTurn:()=>{r=!r},get currentTurn(){return r},ships:a,attack:(e,n,t)=>{e.gameboard.receiveAttack(n,t),i.push({row:n,col:t})},moves:i}};let w,L;const x=()=>{w=S("p1"),L=S("p2"),m(w),m(L);const e=q(),n=q(),t=document.createElement("div");t.classList.add("ui-container");const r=document.createElement("div");r.classList.add("game-container"),r.append(e,n),z(w,e),z(L,n);const a=j();t.append(Y(),a,$(),W());const{body:i}=document;i.append(r,t),H(),O(),e.classList.add("grid-unclickable"),n.classList.add("grid-unclickable"),a.addEventListener("click",Z)},q=()=>{const e=document.createElement("div");e.classList.add("grid-outerContainer");const n=document.createElement("div");n.classList.add("grid-innerContainer");const t=[...Array(11).keys()].splice(1),r=Array.from({length:10},((e,n)=>String.fromCharCode("A".charCodeAt(0)+n)));for(let e=-1;e<10;e++)for(let a=-1;a<10;a++){const i=document.createElement("div");i.classList.add("grid-space");const o=document.createElement("div");o.classList.add("grid-spaceContent"),-1===e&&a>-1?o.textContent=t[a]:e>-1&&-1===a?o.textContent=r[e]:e>-1&&a>-1&&i.classList.add("grid-space-empty"),i.dataset.row=e,i.dataset.col=a,i.append(o),n.append(i)}return e.append(n),e},z=(e,n)=>{const t=e.gameboard.grid;for(let e=0;e<t.length;e++)for(let r=0;r<t[0].length;r++)0===t[e][r].position&&T(e,r,t[e][r].ship,n)},T=(e,n,t,r)=>{let a=e,i=n;for(let o=0;o<t.length;o++){t.isHorizontal?i=n+o:a=e+o;const s=r.querySelector(`.grid-space[data-row="${a}"][data-col="${i}"]`),d=s.querySelector(".grid-spaceContent");s.classList.add("grid-space-occupied"),s.classList.remove("grid-space-empty"),t.hitSpaces[o]||(d.textContent=t.name.charAt(0).toUpperCase())}},H=()=>{const e=document.querySelectorAll(".grid-outerContainer"),n=[w.gameboard.grid,L.gameboard.grid];e.forEach(((e,t)=>{for(let r=0;r<n[t].length;r++)for(let a=0;a<n[t][0].length;a++)n[t][r][a].ship&&e.querySelector(`.grid-space[data-row="${r}"][data-col="${a}"]`).classList.add("grid-space-shipHold")}))},Y=()=>{const e=document.createElement("div");e.classList.add("ui-playerNames");for(let n=0;n<2;n++){const t=document.createElement("div");t.classList.add("ui-name"),t.textContent=[w.name,L.name][n];const r=document.createElement("div");r.classList.add("ui-playerTypeContainer");const a=document.createElement("label");a.textContent="Computer?",a.setAttribute("for",`p${n+1}-type`),a.classList.add("ui-playerTypeLabel");const i=document.createElement("input");i.type="checkbox",i.id=`p${n+1}-type`,i.classList.add("ui-playerTypeCheckbox"),r.append(a,i),e.append(t,r)}return e},M=()=>{const e=document.querySelectorAll(".ui-playerTypeCheckbox"),n=document.querySelector(".ui-nextButton"),t=[e[0].checked,e[1].checked],r=[],a=[];e.forEach(((i,o)=>{i.addEventListener("change",(()=>{r.push(n.textContent),a.push(n.classList.contains("ui-nextButton-unclickable")),i.checked!==t[o]||e[1-o].checked!==t[1-o]?(n.textContent="Restart game?",n.removeEventListener("click",Z),n.addEventListener("click",Q),a[0]&&n.classList.remove("ui-nextButton-unclickable")):(n.textContent=r[0],n.removeEventListener("click",Q),n.addEventListener("click",Z),a[0]&&n.classList.add("ui-nextButton-unclickable"))}))}))},j=()=>{const e=document.createElement("button");return e.classList.add("ui-nextButton"),e.textContent="Start game",e},$=()=>{const e=document.createElement("div");e.classList.add("ui-resultContainer"),e.textContent="Target hit: ";const n=document.createElement("span");return n.classList.add("ui-result"),n.textContent="test",e.append(n),e.classList.add("ui-resultContainer-hidden"),e},W=()=>{const e=document.createElement("div");return e.classList.add("ui-matchResult"),e.classList.add("ui-matchResult-hidden"),e},Z=()=>{const e=document.querySelector(".ui-nextButton");e.classList.add("ui-nextButton-unclickable"),document.querySelector(".ui-resultContainer").classList.add("ui-resultContainer-hidden");const[n,t]=Array.from(document.querySelectorAll(".grid-outerContainer")),r=document.querySelectorAll(".ui-name");w.currentTurn||L.currentTurn?(w.changeTurn(),L.changeTurn(),w.isHuman&&L.isHuman&&(R(t),R(n)),r.forEach((e=>e.classList.toggle("ui-name-current")))):(w.changeTurn(),n.classList.add("grid-unclickable"),e.textContent="Next turn",r[0].classList.add("ui-name-current"),w.isHuman&&L.isHuman?R(t):(w.isHuman||R(n),L.isHuman||R(t)));const a=w.currentTurn?w:L,i=w.currentTurn?t:n;if(a.isHuman)i.classList.remove("grid-unclickable");else{const e=w.currentTurn?L:w,[n,t]=f(a.moves,e),r=i.querySelector(`.grid-space[data-row="${n}"][data-col="${t}"]`);setTimeout((()=>{X(i,a,e,r)}),400)}},R=e=>{e.querySelectorAll(".grid-space-shipHold").forEach((e=>{e.classList.toggle("grid-space-occupied"),e.classList.contains("grid-space-hit")?e.classList.toggle("grid-space-secretlyOccupied"):e.classList.toggle("grid-space-empty")}))},O=()=>{const e=document.querySelectorAll(".grid-outerContainer"),n=[L,w];n.forEach(((t,r)=>{t.isHuman&&I(e[r]).forEach((a=>a.addEventListener("click",(i=>{i.preventDefault(),X(e[r],t,n[1-r],a)}),{once:!0})))}))},X=(e,n,t,r)=>{const a=U(r,n,t);if(D(r,t,e),a&&(e.classList.add("grid-unclickable"),document.querySelector(".ui-nextButton").classList.remove("ui-nextButton-unclickable"),N(t,r),t===w)){const[e,n]=[L.gameboard.allShipsAreSunk(),w.gameboard.allShipsAreSunk()];e&&n?F("tie"):e?F(w.name):n&&F(L.name)}},U=(e,n,t)=>{const r=[e.dataset.row,e.dataset.col];return!t.gameboard.grid[r[0]][r[1]].hasBeenHit&&(n.attack(t,...r),!0)},D=(e,n,t)=>{e.classList.add("grid-space-hit");const{ship:r}=n.gameboard.grid[e.dataset.row][e.dataset.col];if(r&&(e.classList.contains("grid-space-occupied")||e.classList.add("grid-space-secretlyOccupied"),r.isSunk())){const e=r.coordinates,n=r.isHorizontal?"horizontal":"vertical";for(let r=0;r<e.length;r++){const a=t.querySelector(`.grid-space[data-row="${e[r].row}"][data-col="${e[r].col}"]`);switch(r){case 0:a.classList.add(`grid-sunkSpace-${n}Start`);break;case e.length-1:a.classList.add(`grid-sunkSpace-${n}End`);break;default:a.classList.add(`grid-sunkSpace-${n}Middle`)}}}},N=(e,n)=>{const{ship:t}=e.gameboard.grid[n.dataset.row][n.dataset.col];t&&(document.querySelector(".ui-result").textContent=t.name,document.querySelector(".ui-resultContainer").classList.remove("ui-resultContainer-hidden"))},F=e=>{const n=document.querySelector(".ui-matchResult");n.textContent="tie"===e?"Tie!":`${e} wins!`,n.classList.remove("ui-matchResult-hidden");const t=document.querySelector(".ui-nextButton");t.removeEventListener("click",Z),t.textContent="New game?",t.addEventListener("click",Q,{once:!0})},Q=()=>{let e=document.querySelectorAll(".ui-playerTypeCheckbox");const n=[e[0].checked,e[1].checked];P(),x(),e=document.querySelectorAll(".ui-playerTypeCheckbox"),e.forEach(((e,t)=>{n[t]&&(e.checked=!0,[w,L][t].togglePlayerController())})),M()},P=()=>{[document.querySelector(".game-container"),document.querySelector(".ui-container")].forEach((e=>e.remove()))},I=e=>{const n=[];for(let t=0;t<10;t++)for(let r=0;r<10;r++)n.push(e.querySelector(`.grid-space[data-row="${t}"][data-col="${r}"]`));return n};x(),M()}},e=>{e.O(0,[335,738],(()=>(789,e(e.s=789)))),e.O()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LDZCQUdwQitELEtBRUkwQyxFQUFvQixLQUNSLENBQ2QvRixTQUFTcUMsY0FBYyxtQkFDdkJyQyxTQUFTcUMsY0FBYyxrQkFFakJ4RyxTQUFTbUssR0FBU0EsRUFBS3pELFlBRTNCd0MsRUFBdUI5QyxJQUMzQixNQUFNZ0UsRUFBZ0IsR0FDdEIsSUFBSyxJQUFJbEosRUFBSSxFQUFHQSxFQUFJLEdBQUlBLElBQ3RCLElBQUssSUFBSW1CLEVBQUksRUFBR0EsRUFBSSxHQUFJQSxJQUN0QitILEVBQWNoTCxLQUNaZ0gsRUFBWUksY0FBYyx5QkFBeUJ0RixpQkFBaUJtQixRQUkxRSxPQUFPK0gsR0N2WVQsSUFDQSxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9zdHlsZXMvc3R5bGUuY3NzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc3R5bGVzL3N0eWxlLmNzcz9mZjk0Iiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvbXZjL2NvbnRyb2xsZXIuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tdmMvbW9kZWwuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL3NyYy9tdmMvdmlldy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydHNcbmltcG9ydCBfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fIGZyb20gXCIuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qc1wiO1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyBmcm9tIFwiLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2FwaS5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfRVhQT1JUX19fID0gX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fKF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIFwiOnJvb3Qge1xcbiAgLS1zdW5rLWJvcmRlci13aWR0aDogNXB4O1xcbiAgLS1zdW5rLWJvcmRlcnM6IHZhcigtLXN1bmstYm9yZGVyLXdpZHRoKSBzb2xpZCByZWQ7XFxuICAtLWdyaWQtc3BhY2Utd2lkdGg6IDQuNXJlbTtcXG4gIGZvbnQtc2l6ZTogNjIuNSU7XFxufVxcbioge1xcbiAgbWFyZ2luOiAwO1xcbiAgcGFkZGluZzogMDtcXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XFxuICBmb250LXNpemU6IGluaGVyaXQ7XFxuICBmb250LWZhbWlseTogaW5oZXJpdDtcXG59XFxuYm9keSB7XFxuICBoZWlnaHQ6IDEwMCU7XFxuICB3aWR0aDogMTAwJTtcXG4gIGZvbnQtc2l6ZTogMnJlbTtcXG59XFxuLmdhbWUtY29udGFpbmVyIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxufVxcblxcbi5ncmlkLXVuY2xpY2thYmxlIHtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG4uZ3JpZC1vdXRlckNvbnRhaW5lciB7XFxuICBtYXJnaW46IDFyZW07XFxuICBwYWRkaW5nOiAycmVtO1xcbiAgYmFja2dyb3VuZDogYmxhY2s7XFxufVxcbi5ncmlkLWlubmVyQ29udGFpbmVyIHtcXG4gIGhlaWdodDogMTAwJTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgZGlzcGxheTogZ3JpZDtcXG4gIGdyaWQtdGVtcGxhdGU6IHJlcGVhdCgxMSwgdmFyKC0tZ3JpZC1zcGFjZS13aWR0aCkpIC8gcmVwZWF0KDExLCB2YXIoLS1ncmlkLXNwYWNlLXdpZHRoKSk7XFxuICBnYXA6IDAuNXJlbTtcXG4gIGJhY2tncm91bmQ6IGxpZ2h0Ymx1ZTtcXG59XFxuLmdyaWQtc3BhY2Uge1xcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xcbiAgZGlzcGxheTogZ3JpZDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xcbiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2IoMCwgMCwgMCwgMCk7XFxufVxcbkBtZWRpYSAoaG92ZXI6IGhvdmVyKSB7XFxuICAuZ3JpZC1zcGFjZTpub3QoW2RhdGEtcm93PSctMSddLCBbZGF0YS1jb2w9Jy0xJ10pOmhvdmVyIHtcXG4gICAgYmFja2dyb3VuZDogcGluaztcXG4gIH1cXG59XFxuLmdyaWQtc3BhY2Utb2NjdXBpZWQ6bm90KC5ncmlkLXNwYWNlLXNlY3JldGx5T2NjdXBpZWQpIHtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgYmFja2dyb3VuZDogcmdiKDg4LCA4NywgODcpO1xcbiAgY29sb3I6IHdoaXRlO1xcbn1cXG4uZ3JpZC1zcGFjZS1lbXB0eSB7XFxuICBjb2xvcjogdHJhbnNwYXJlbnQ7XFxufVxcbi5ncmlkLXNwYWNlLWVtcHR5ID4gLmdyaWQtc3BhY2VDb250ZW50OjphZnRlciB7XFxuICBjb250ZW50OiAnJztcXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcXG4gIGxlZnQ6IDM1JTtcXG4gIHRvcDogMzUlO1xcbiAgd2lkdGg6IDMwJTtcXG4gIGhlaWdodDogMzAlO1xcbiAgYmFja2dyb3VuZDogYmxhY2s7XFxuICBib3JkZXItcmFkaXVzOiAxcmVtO1xcbn1cXG4uZ3JpZC1zcGFjZS1oaXQ6OmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMjUlO1xcbiAgdG9wOiAyNSU7XFxuICB3aWR0aDogY2FsYyh2YXIoLS1ncmlkLXNwYWNlLXdpZHRoKSAqIDAuNSk7XFxuICBoZWlnaHQ6IGNhbGModmFyKC0tZ3JpZC1zcGFjZS13aWR0aCkgKiAwLjUpO1xcbiAgYmFja2dyb3VuZDogZ29sZGVucm9kO1xcbiAgYm9yZGVyLXJhZGl1czogNXJlbTtcXG59XFxuLmdyaWQtc3BhY2UtaGl0LmdyaWQtc3BhY2Utb2NjdXBpZWQ6OmFmdGVyLFxcbi5ncmlkLXNwYWNlLWhpdC5ncmlkLXNwYWNlLXNlY3JldGx5T2NjdXBpZWQ6OmFmdGVyIHtcXG4gIGJhY2tncm91bmQ6IHJlZDtcXG59XFxuLmdyaWQtc3Vua1NwYWNlLWhvcml6b250YWxTdGFydCB7XFxuICBib3JkZXItbGVmdDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG4gIGJvcmRlci10b3A6IHZhcigtLXN1bmstYm9yZGVycyk7XFxuICBib3JkZXItYm90dG9tOiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbn1cXG4uZ3JpZC1zdW5rU3BhY2UtaG9yaXpvbnRhbE1pZGRsZSB7XFxuICBib3JkZXItdG9wOiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbiAgYm9yZGVyLWJvdHRvbTogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG59XFxuLmdyaWQtc3Vua1NwYWNlLWhvcml6b250YWxFbmQge1xcbiAgYm9yZGVyLXRvcDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG4gIGJvcmRlci1ib3R0b206IHZhcigtLXN1bmstYm9yZGVycyk7XFxuICBib3JkZXItcmlnaHQ6IHZhcigtLXN1bmstYm9yZGVycyk7XFxufVxcbi5ncmlkLXN1bmtTcGFjZS12ZXJ0aWNhbFN0YXJ0IHtcXG4gIGJvcmRlci10b3A6IHZhcigtLXN1bmstYm9yZGVycyk7XFxuICBib3JkZXItcmlnaHQ6IHZhcigtLXN1bmstYm9yZGVycyk7XFxuICBib3JkZXItbGVmdDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG59XFxuLmdyaWQtc3Vua1NwYWNlLXZlcnRpY2FsTWlkZGxlIHtcXG4gIGJvcmRlci1yaWdodDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG4gIGJvcmRlci1sZWZ0OiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbn1cXG4uZ3JpZC1zdW5rU3BhY2UtdmVydGljYWxFbmQge1xcbiAgYm9yZGVyLXJpZ2h0OiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbiAgYm9yZGVyLWxlZnQ6IHZhcigtLXN1bmstYm9yZGVycyk7XFxuICBib3JkZXItYm90dG9tOiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbn1cXG4uZ3JpZC1zdW5rU3BhY2UtaG9yaXpvbnRhbFN0YXJ0OjphZnRlcixcXG4uZ3JpZC1zdW5rU3BhY2UtdmVydGljYWxTdGFydDo6YWZ0ZXIge1xcbiAgbGVmdDogY2FsYyhjYWxjKHZhcigtLWdyaWQtc3BhY2Utd2lkdGgpICogMC4yNSkgLSB2YXIoLS1zdW5rLWJvcmRlci13aWR0aCkpO1xcbiAgdG9wOiBjYWxjKGNhbGModmFyKC0tZ3JpZC1zcGFjZS13aWR0aCkgKiAwLjI1KSAtIHZhcigtLXN1bmstYm9yZGVyLXdpZHRoKSk7XFxufVxcbi5ncmlkLXN1bmtTcGFjZS1ob3Jpem9udGFsTWlkZGxlOjphZnRlcixcXG4uZ3JpZC1zdW5rU3BhY2UtaG9yaXpvbnRhbEVuZDo6YWZ0ZXIge1xcbiAgdG9wOiBjYWxjKGNhbGModmFyKC0tZ3JpZC1zcGFjZS13aWR0aCkgKiAwLjI1KSAtIHZhcigtLXN1bmstYm9yZGVyLXdpZHRoKSk7XFxufVxcbi5ncmlkLXN1bmtTcGFjZS12ZXJ0aWNhbE1pZGRsZTo6YWZ0ZXIsXFxuLmdyaWQtc3Vua1NwYWNlLXZlcnRpY2FsRW5kOjphZnRlciB7XFxuICBsZWZ0OiBjYWxjKGNhbGModmFyKC0tZ3JpZC1zcGFjZS13aWR0aCkgKiAwLjI1KSAtIHZhcigtLXN1bmstYm9yZGVyLXdpZHRoKSk7XFxufVxcblxcbi51aS1jb250YWluZXIge1xcbiAgbWFyZ2luLWxlZnQ6IDVyZW07XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGdhcDogNXJlbTtcXG59XFxuLnVpLXBsYXllck5hbWVzIHtcXG4gIHdpZHRoOiA1MHJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcXG4gIGJvcmRlcjogM3B4IHNvbGlkIHBpbms7XFxufVxcbi51aS1uYW1lIHtcXG4gIHdpZHRoOiAxNXJlbTtcXG4gIGhlaWdodDogN3JlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBiYWNrZ3JvdW5kOiBvcmFuZ2U7XFxufVxcbi51aS1uYW1lLWN1cnJlbnQge1xcbiAgYm9yZGVyOiAxMHB4IHNvbGlkIHB1cnBsZTtcXG59XFxuLnVpLXBsYXllclR5cGVMYWJlbCB7XFxuICBjdXJzb3I6IHBvaW50ZXI7XFxufVxcbi51aS1uZXh0QnV0dG9uIHtcXG4gIGhlaWdodDogN3JlbTtcXG4gIHdpZHRoOiAxMnJlbTtcXG59XFxuLnVpLW5leHRCdXR0b24tdW5jbGlja2FibGUge1xcbiAgY29sb3I6IGdyZXk7XFxuICBwb2ludGVyLWV2ZW50czogbm9uZTtcXG59XFxuLnVpLXJlc3VsdENvbnRhaW5lci1oaWRkZW4ge1xcbiAgdmlzaWJpbGl0eTogaGlkZGVuO1xcbn1cXG4udWktcmVzdWx0IHtcXG4gIGNvbG9yOiByZWQ7XFxufVxcbi51aS1tYXRjaFJlc3VsdCB7XFxuICBmb250LXNpemU6IDNyZW07XFxuICBmb250LXdlaWdodDogYm9sZDtcXG4gIGNvbG9yOiBncmVlbjtcXG59XFxuLnVpLW1hdGNoUmVzdWx0LWhpZGRlbiB7XFxuICB2aXNpYmlsaXR5OiBoaWRkZW47XFxufVxcblwiLCBcIlwiLHtcInZlcnNpb25cIjozLFwic291cmNlc1wiOltcIndlYnBhY2s6Ly8uL3NyYy9zdHlsZXMvc3R5bGUuY3NzXCJdLFwibmFtZXNcIjpbXSxcIm1hcHBpbmdzXCI6XCJBQUFBO0VBQ0Usd0JBQXdCO0VBQ3hCLGtEQUFrRDtFQUNsRCwwQkFBMEI7RUFDMUIsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxTQUFTO0VBQ1QsVUFBVTtFQUNWLHNCQUFzQjtFQUN0QixrQkFBa0I7RUFDbEIsb0JBQW9CO0FBQ3RCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osV0FBVztFQUNYLGVBQWU7QUFDakI7QUFDQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLG9CQUFvQjtBQUN0QjtBQUNBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixpQkFBaUI7QUFDbkI7QUFDQTtFQUNFLFlBQVk7RUFDWixXQUFXO0VBQ1gsYUFBYTtFQUNiLHdGQUF3RjtFQUN4RixXQUFXO0VBQ1gscUJBQXFCO0FBQ3ZCO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsYUFBYTtFQUNiLHVCQUF1QjtFQUN2QixtQkFBbUI7RUFDbkIsaUJBQWlCO0VBQ2pCLDRDQUE0QztBQUM5QztBQUNBO0VBQ0U7SUFDRSxnQkFBZ0I7RUFDbEI7QUFDRjtBQUNBO0VBQ0UsaUJBQWlCO0VBQ2pCLDJCQUEyQjtFQUMzQixZQUFZO0FBQ2Q7QUFDQTtFQUNFLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsUUFBUTtFQUNSLFVBQVU7RUFDVixXQUFXO0VBQ1gsaUJBQWlCO0VBQ2pCLG1CQUFtQjtBQUNyQjtBQUNBO0VBQ0UsV0FBVztFQUNYLGtCQUFrQjtFQUNsQixTQUFTO0VBQ1QsUUFBUTtFQUNSLDBDQUEwQztFQUMxQywyQ0FBMkM7RUFDM0MscUJBQXFCO0VBQ3JCLG1CQUFtQjtBQUNyQjtBQUNBOztFQUVFLGVBQWU7QUFDakI7QUFDQTtFQUNFLGdDQUFnQztFQUNoQywrQkFBK0I7RUFDL0Isa0NBQWtDO0FBQ3BDO0FBQ0E7RUFDRSwrQkFBK0I7RUFDL0Isa0NBQWtDO0FBQ3BDO0FBQ0E7RUFDRSwrQkFBK0I7RUFDL0Isa0NBQWtDO0VBQ2xDLGlDQUFpQztBQUNuQztBQUNBO0VBQ0UsK0JBQStCO0VBQy9CLGlDQUFpQztFQUNqQyxnQ0FBZ0M7QUFDbEM7QUFDQTtFQUNFLGlDQUFpQztFQUNqQyxnQ0FBZ0M7QUFDbEM7QUFDQTtFQUNFLGlDQUFpQztFQUNqQyxnQ0FBZ0M7RUFDaEMsa0NBQWtDO0FBQ3BDO0FBQ0E7O0VBRUUsMkVBQTJFO0VBQzNFLDBFQUEwRTtBQUM1RTtBQUNBOztFQUVFLDBFQUEwRTtBQUM1RTtBQUNBOztFQUVFLDJFQUEyRTtBQUM3RTs7QUFFQTtFQUNFLGlCQUFpQjtFQUNqQixhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFNBQVM7QUFDWDtBQUNBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYiw2QkFBNkI7RUFDN0Isc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osWUFBWTtFQUNaLGFBQWE7RUFDYix1QkFBdUI7RUFDdkIsbUJBQW1CO0VBQ25CLGtCQUFrQjtBQUNwQjtBQUNBO0VBQ0UseUJBQXlCO0FBQzNCO0FBQ0E7RUFDRSxlQUFlO0FBQ2pCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osWUFBWTtBQUNkO0FBQ0E7RUFDRSxXQUFXO0VBQ1gsb0JBQW9CO0FBQ3RCO0FBQ0E7RUFDRSxrQkFBa0I7QUFDcEI7QUFDQTtFQUNFLFVBQVU7QUFDWjtBQUNBO0VBQ0UsZUFBZTtFQUNmLGlCQUFpQjtFQUNqQixZQUFZO0FBQ2Q7QUFDQTtFQUNFLGtCQUFrQjtBQUNwQlwiLFwic291cmNlc0NvbnRlbnRcIjpbXCI6cm9vdCB7XFxuICAtLXN1bmstYm9yZGVyLXdpZHRoOiA1cHg7XFxuICAtLXN1bmstYm9yZGVyczogdmFyKC0tc3Vuay1ib3JkZXItd2lkdGgpIHNvbGlkIHJlZDtcXG4gIC0tZ3JpZC1zcGFjZS13aWR0aDogNC41cmVtO1xcbiAgZm9udC1zaXplOiA2Mi41JTtcXG59XFxuKiB7XFxuICBtYXJnaW46IDA7XFxuICBwYWRkaW5nOiAwO1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcXG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xcbn1cXG5ib2R5IHtcXG4gIGhlaWdodDogMTAwJTtcXG4gIHdpZHRoOiAxMDAlO1xcbiAgZm9udC1zaXplOiAycmVtO1xcbn1cXG4uZ2FtZS1jb250YWluZXIge1xcbiAgZGlzcGxheTogZmxleDtcXG59XFxuXFxuLmdyaWQtdW5jbGlja2FibGUge1xcbiAgcG9pbnRlci1ldmVudHM6IG5vbmU7XFxufVxcbi5ncmlkLW91dGVyQ29udGFpbmVyIHtcXG4gIG1hcmdpbjogMXJlbTtcXG4gIHBhZGRpbmc6IDJyZW07XFxuICBiYWNrZ3JvdW5kOiBibGFjaztcXG59XFxuLmdyaWQtaW5uZXJDb250YWluZXIge1xcbiAgaGVpZ2h0OiAxMDAlO1xcbiAgd2lkdGg6IDEwMCU7XFxuICBkaXNwbGF5OiBncmlkO1xcbiAgZ3JpZC10ZW1wbGF0ZTogcmVwZWF0KDExLCB2YXIoLS1ncmlkLXNwYWNlLXdpZHRoKSkgLyByZXBlYXQoMTEsIHZhcigtLWdyaWQtc3BhY2Utd2lkdGgpKTtcXG4gIGdhcDogMC41cmVtO1xcbiAgYmFja2dyb3VuZDogbGlnaHRibHVlO1xcbn1cXG4uZ3JpZC1zcGFjZSB7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxuICBkaXNwbGF5OiBncmlkO1xcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgYmFja2dyb3VuZDogd2hpdGU7XFxuICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHJnYigwLCAwLCAwLCAwKTtcXG59XFxuQG1lZGlhIChob3ZlcjogaG92ZXIpIHtcXG4gIC5ncmlkLXNwYWNlOm5vdChbZGF0YS1yb3c9Jy0xJ10sIFtkYXRhLWNvbD0nLTEnXSk6aG92ZXIge1xcbiAgICBiYWNrZ3JvdW5kOiBwaW5rO1xcbiAgfVxcbn1cXG4uZ3JpZC1zcGFjZS1vY2N1cGllZDpub3QoLmdyaWQtc3BhY2Utc2VjcmV0bHlPY2N1cGllZCkge1xcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XFxuICBiYWNrZ3JvdW5kOiByZ2IoODgsIDg3LCA4Nyk7XFxuICBjb2xvcjogd2hpdGU7XFxufVxcbi5ncmlkLXNwYWNlLWVtcHR5IHtcXG4gIGNvbG9yOiB0cmFuc3BhcmVudDtcXG59XFxuLmdyaWQtc3BhY2UtZW1wdHkgPiAuZ3JpZC1zcGFjZUNvbnRlbnQ6OmFmdGVyIHtcXG4gIGNvbnRlbnQ6ICcnO1xcbiAgcG9zaXRpb246IGFic29sdXRlO1xcbiAgbGVmdDogMzUlO1xcbiAgdG9wOiAzNSU7XFxuICB3aWR0aDogMzAlO1xcbiAgaGVpZ2h0OiAzMCU7XFxuICBiYWNrZ3JvdW5kOiBibGFjaztcXG4gIGJvcmRlci1yYWRpdXM6IDFyZW07XFxufVxcbi5ncmlkLXNwYWNlLWhpdDo6YWZ0ZXIge1xcbiAgY29udGVudDogJyc7XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICBsZWZ0OiAyNSU7XFxuICB0b3A6IDI1JTtcXG4gIHdpZHRoOiBjYWxjKHZhcigtLWdyaWQtc3BhY2Utd2lkdGgpICogMC41KTtcXG4gIGhlaWdodDogY2FsYyh2YXIoLS1ncmlkLXNwYWNlLXdpZHRoKSAqIDAuNSk7XFxuICBiYWNrZ3JvdW5kOiBnb2xkZW5yb2Q7XFxuICBib3JkZXItcmFkaXVzOiA1cmVtO1xcbn1cXG4uZ3JpZC1zcGFjZS1oaXQuZ3JpZC1zcGFjZS1vY2N1cGllZDo6YWZ0ZXIsXFxuLmdyaWQtc3BhY2UtaGl0LmdyaWQtc3BhY2Utc2VjcmV0bHlPY2N1cGllZDo6YWZ0ZXIge1xcbiAgYmFja2dyb3VuZDogcmVkO1xcbn1cXG4uZ3JpZC1zdW5rU3BhY2UtaG9yaXpvbnRhbFN0YXJ0IHtcXG4gIGJvcmRlci1sZWZ0OiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbiAgYm9yZGVyLXRvcDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG4gIGJvcmRlci1ib3R0b206IHZhcigtLXN1bmstYm9yZGVycyk7XFxufVxcbi5ncmlkLXN1bmtTcGFjZS1ob3Jpem9udGFsTWlkZGxlIHtcXG4gIGJvcmRlci10b3A6IHZhcigtLXN1bmstYm9yZGVycyk7XFxuICBib3JkZXItYm90dG9tOiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbn1cXG4uZ3JpZC1zdW5rU3BhY2UtaG9yaXpvbnRhbEVuZCB7XFxuICBib3JkZXItdG9wOiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbiAgYm9yZGVyLWJvdHRvbTogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG4gIGJvcmRlci1yaWdodDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG59XFxuLmdyaWQtc3Vua1NwYWNlLXZlcnRpY2FsU3RhcnQge1xcbiAgYm9yZGVyLXRvcDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG4gIGJvcmRlci1yaWdodDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG4gIGJvcmRlci1sZWZ0OiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbn1cXG4uZ3JpZC1zdW5rU3BhY2UtdmVydGljYWxNaWRkbGUge1xcbiAgYm9yZGVyLXJpZ2h0OiB2YXIoLS1zdW5rLWJvcmRlcnMpO1xcbiAgYm9yZGVyLWxlZnQ6IHZhcigtLXN1bmstYm9yZGVycyk7XFxufVxcbi5ncmlkLXN1bmtTcGFjZS12ZXJ0aWNhbEVuZCB7XFxuICBib3JkZXItcmlnaHQ6IHZhcigtLXN1bmstYm9yZGVycyk7XFxuICBib3JkZXItbGVmdDogdmFyKC0tc3Vuay1ib3JkZXJzKTtcXG4gIGJvcmRlci1ib3R0b206IHZhcigtLXN1bmstYm9yZGVycyk7XFxufVxcbi5ncmlkLXN1bmtTcGFjZS1ob3Jpem9udGFsU3RhcnQ6OmFmdGVyLFxcbi5ncmlkLXN1bmtTcGFjZS12ZXJ0aWNhbFN0YXJ0OjphZnRlciB7XFxuICBsZWZ0OiBjYWxjKGNhbGModmFyKC0tZ3JpZC1zcGFjZS13aWR0aCkgKiAwLjI1KSAtIHZhcigtLXN1bmstYm9yZGVyLXdpZHRoKSk7XFxuICB0b3A6IGNhbGMoY2FsYyh2YXIoLS1ncmlkLXNwYWNlLXdpZHRoKSAqIDAuMjUpIC0gdmFyKC0tc3Vuay1ib3JkZXItd2lkdGgpKTtcXG59XFxuLmdyaWQtc3Vua1NwYWNlLWhvcml6b250YWxNaWRkbGU6OmFmdGVyLFxcbi5ncmlkLXN1bmtTcGFjZS1ob3Jpem9udGFsRW5kOjphZnRlciB7XFxuICB0b3A6IGNhbGMoY2FsYyh2YXIoLS1ncmlkLXNwYWNlLXdpZHRoKSAqIDAuMjUpIC0gdmFyKC0tc3Vuay1ib3JkZXItd2lkdGgpKTtcXG59XFxuLmdyaWQtc3Vua1NwYWNlLXZlcnRpY2FsTWlkZGxlOjphZnRlcixcXG4uZ3JpZC1zdW5rU3BhY2UtdmVydGljYWxFbmQ6OmFmdGVyIHtcXG4gIGxlZnQ6IGNhbGMoY2FsYyh2YXIoLS1ncmlkLXNwYWNlLXdpZHRoKSAqIDAuMjUpIC0gdmFyKC0tc3Vuay1ib3JkZXItd2lkdGgpKTtcXG59XFxuXFxuLnVpLWNvbnRhaW5lciB7XFxuICBtYXJnaW4tbGVmdDogNXJlbTtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1pdGVtczogY2VudGVyO1xcbiAgZ2FwOiA1cmVtO1xcbn1cXG4udWktcGxheWVyTmFtZXMge1xcbiAgd2lkdGg6IDUwcmVtO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kO1xcbiAgYm9yZGVyOiAzcHggc29saWQgcGluaztcXG59XFxuLnVpLW5hbWUge1xcbiAgd2lkdGg6IDE1cmVtO1xcbiAgaGVpZ2h0OiA3cmVtO1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGp1c3RpZnktY29udGVudDogY2VudGVyO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGJhY2tncm91bmQ6IG9yYW5nZTtcXG59XFxuLnVpLW5hbWUtY3VycmVudCB7XFxuICBib3JkZXI6IDEwcHggc29saWQgcHVycGxlO1xcbn1cXG4udWktcGxheWVyVHlwZUxhYmVsIHtcXG4gIGN1cnNvcjogcG9pbnRlcjtcXG59XFxuLnVpLW5leHRCdXR0b24ge1xcbiAgaGVpZ2h0OiA3cmVtO1xcbiAgd2lkdGg6IDEycmVtO1xcbn1cXG4udWktbmV4dEJ1dHRvbi11bmNsaWNrYWJsZSB7XFxuICBjb2xvcjogZ3JleTtcXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xcbn1cXG4udWktcmVzdWx0Q29udGFpbmVyLWhpZGRlbiB7XFxuICB2aXNpYmlsaXR5OiBoaWRkZW47XFxufVxcbi51aS1yZXN1bHQge1xcbiAgY29sb3I6IHJlZDtcXG59XFxuLnVpLW1hdGNoUmVzdWx0IHtcXG4gIGZvbnQtc2l6ZTogM3JlbTtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbiAgY29sb3I6IGdyZWVuO1xcbn1cXG4udWktbWF0Y2hSZXN1bHQtaGlkZGVuIHtcXG4gIHZpc2liaWxpdHk6IGhpZGRlbjtcXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlxuICAgICAgaW1wb3J0IEFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiO1xuICAgICAgaW1wb3J0IGRvbUFQSSBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlRG9tQVBJLmpzXCI7XG4gICAgICBpbXBvcnQgaW5zZXJ0Rm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzXCI7XG4gICAgICBpbXBvcnQgc2V0QXR0cmlidXRlcyBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydFN0eWxlRWxlbWVudCBmcm9tIFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luc2VydFN0eWxlRWxlbWVudC5qc1wiO1xuICAgICAgaW1wb3J0IHN0eWxlVGFnVHJhbnNmb3JtRm4gZnJvbSBcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZVRhZ1RyYW5zZm9ybS5qc1wiO1xuICAgICAgaW1wb3J0IGNvbnRlbnQsICogYXMgbmFtZWRFeHBvcnQgZnJvbSBcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgIFxuICAgICAgXG5cbnZhciBvcHRpb25zID0ge307XG5cbm9wdGlvbnMuc3R5bGVUYWdUcmFuc2Zvcm0gPSBzdHlsZVRhZ1RyYW5zZm9ybUZuO1xub3B0aW9ucy5zZXRBdHRyaWJ1dGVzID0gc2V0QXR0cmlidXRlcztcblxuICAgICAgb3B0aW9ucy5pbnNlcnQgPSBpbnNlcnRGbi5iaW5kKG51bGwsIFwiaGVhZFwiKTtcbiAgICBcbm9wdGlvbnMuZG9tQVBJID0gZG9tQVBJO1xub3B0aW9ucy5pbnNlcnRTdHlsZUVsZW1lbnQgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7XG5cbnZhciB1cGRhdGUgPSBBUEkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5leHBvcnQgKiBmcm9tIFwiISEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL3N0eWxlLmNzc1wiO1xuICAgICAgIGV4cG9ydCBkZWZhdWx0IGNvbnRlbnQgJiYgY29udGVudC5sb2NhbHMgPyBjb250ZW50LmxvY2FscyA6IHVuZGVmaW5lZDtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lICovXG5jb25zdCBwbGFjZUFsbFNoaXBzID0gKHBsYXllcikgPT4ge1xuICBwbGF5ZXIuc2hpcHMuZm9yRWFjaCgoc2hpcCkgPT4ge1xuICAgIGFzc2lnblNoaXBPcmllbnRhdGlvbihzaGlwKTtcbiAgICByYW5kb21seVBsYWNlU2hpcChwbGF5ZXIsIHNoaXApO1xuICB9KTtcbn07XG5jb25zdCByYW5kb21seVBsYWNlU2hpcCA9IChwbGF5ZXIsIHNoaXApID0+IHtcbiAgbGV0IGNvb3JkcyA9IGdldFJhbmRvbUNvb3JkaW5hdGVzKCk7XG4gIHdoaWxlICghYXJlU3BhY2VzQXZhaWxhYmxlRm9yU2hpcChwbGF5ZXIsIHNoaXAsIC4uLmNvb3JkcykpIHtcbiAgICBjb29yZHMgPSBnZXRSYW5kb21Db29yZGluYXRlcygpO1xuICB9XG4gIHBsYXllci5nYW1lYm9hcmQucGxhY2VTaGlwKHNoaXAsIC4uLmNvb3Jkcyk7XG59O1xuY29uc3QgYXNzaWduU2hpcE9yaWVudGF0aW9uID0gKHNoaXApID0+IHtcbiAgY29uc3QgZGlyZWN0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMik7XG4gIGlmIChkaXJlY3Rpb24gPT09IDApIHtcbiAgICBzaGlwLnR1cm5TaGlwKCk7XG4gIH1cbn07XG5jb25zdCBnZXRSYW5kb21Db29yZGluYXRlcyA9ICgpID0+IHtcbiAgY29uc3QgeSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgY29uc3QgeCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgcmV0dXJuIFt5LCB4XTtcbn07XG5jb25zdCBhcmVTcGFjZXNBdmFpbGFibGVGb3JTaGlwID0gKHBsYXllciwgc2hpcCwgeSwgeCkgPT4ge1xuICBsZXQgcm93ID0geTtcbiAgbGV0IGNvbCA9IHg7XG4gIGNvbnN0IHsgZ3JpZCB9ID0gcGxheWVyLmdhbWVib2FyZDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaGlwLmxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKHNoaXAuaXNIb3Jpem9udGFsKSB7XG4gICAgICBjb2wgPSB4ICsgaTtcbiAgICB9IGVsc2Uge1xuICAgICAgcm93ID0geSArIGk7XG4gICAgfVxuICAgIGlmIChjb2wgPj0gZ3JpZC5sZW5ndGggfHwgcm93ID49IGdyaWRbMF0ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChncmlkW3Jvd11bY29sXS5zaGlwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufTtcbmNvbnN0IHBpY2tDb21wdXRlck1vdmUgPSAocGFzdE1vdmVzLCBlbmVteSkgPT4ge1xuICBjb25zdCB7IGdyaWQgfSA9IGVuZW15LmdhbWVib2FyZDtcbiAgbGV0IGxhc3RNb3ZlTG9jO1xuICBsZXQgbGFzdFRhcmdldDtcbiAgaWYgKHBhc3RNb3Zlcy5sZW5ndGggPiAwKSB7XG4gICAgbGFzdE1vdmVMb2MgPSBwYXN0TW92ZXMubGVuZ3RoIC0gMTtcbiAgICBsYXN0VGFyZ2V0ID0gZ3JpZFtwYXN0TW92ZXNbbGFzdE1vdmVMb2NdLnJvd11bcGFzdE1vdmVzW2xhc3RNb3ZlTG9jXS5jb2xdO1xuICB9XG4gIGlmICghbGFzdFRhcmdldCB8fCAhbGFzdFRhcmdldC5zaGlwIHx8IGxhc3RUYXJnZXQuc2hpcC5pc1N1bmsoKSkge1xuICAgIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGdyaWQubGVuZ3RoKTtcbiAgICBjb25zdCBjb2wgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBncmlkLmxlbmd0aCk7XG4gICAgaWYgKGdyaWRbcm93XVtjb2xdLmhhc0JlZW5IaXQpIHtcbiAgICAgIHJldHVybiBwaWNrQ29tcHV0ZXJNb3ZlKHBhc3RNb3ZlcywgZW5lbXkpO1xuICAgIH1cbiAgICByZXR1cm4gW3JvdywgY29sXTtcbiAgfVxuXG4gIGxldCB0YXJnZXRCZWZvcmVMYXN0O1xuICBpZiAocGFzdE1vdmVzLmxlbmd0aCA+IDEpIHtcbiAgICB0YXJnZXRCZWZvcmVMYXN0ID0gZ3JpZFtwYXN0TW92ZXNbbGFzdE1vdmVMb2MgLSAxXS5yb3ddW3Bhc3RNb3Zlc1tsYXN0TW92ZUxvYyAtIDFdLmNvbF07XG4gIH1cbiAgaWYgKCF0YXJnZXRCZWZvcmVMYXN0IHx8ICF0YXJnZXRCZWZvcmVMYXN0LnNoaXAgfHwgdGFyZ2V0QmVmb3JlTGFzdC5zaGlwLmlzU3VuaygpKSB7XG4gICAgY29uc3QgeyByb3csIGNvbCB9ID0gcGFzdE1vdmVzW2xhc3RNb3ZlTG9jXTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCAyOyBuKyspIHtcbiAgICAgICAgaWYgKGkgPT09IG4pIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3JpZFtyb3cgKyBpXVtjb2wgKyBuXSAmJiAhZ3JpZFtyb3cgKyBpXVtjb2wgKyBuXS5oYXNCZWVuSGl0KSB7XG4gICAgICAgICAgcmV0dXJuIFtyb3cgKyBpLCBjb2wgKyBuXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ3JpZFtyb3cgLSBpXVtjb2wgLSBuXSAmJiAhZ3JpZFtyb3cgLSBpXVtjb2wgLSBuXS5oYXNCZWVuSGl0KSB7XG4gICAgICAgICAgcmV0dXJuIFtyb3cgLSBpLCBjb2wgLSBuXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh0YXJnZXRCZWZvcmVMYXN0LnNoaXAgPT09IGxhc3RUYXJnZXQuc2hpcCkge1xuICAgIGxldCB7IHJvdywgY29sIH0gPSBwYXN0TW92ZXNbbGFzdE1vdmVMb2NdO1xuICAgIGxldCBzaGlmdCA9IGZpbmREaXJlY3Rpb25hbEluY3JlbWVudChwYXN0TW92ZXMpO1xuICAgIHJvdyArPSBzaGlmdFswXTtcbiAgICBjb2wgKz0gc2hpZnRbMV07XG4gICAgaWYgKGdyaWRbcm93XVtjb2xdICYmICFncmlkW3Jvd11bY29sXS5oYXNCZWVuSGl0KSB7XG4gICAgICByZXR1cm4gW3JvdywgY29sXTtcbiAgICB9XG4gICAgc2hpZnQgPSBzaGlmdC5tYXAoKG51bSkgPT4gbnVtICogLTEpO1xuICAgIGRvIHtcbiAgICAgIHJvdyArPSBzaGlmdFswXTtcbiAgICAgIGNvbCArPSBzaGlmdFsxXTtcbiAgICB9IHdoaWxlICghZ3JpZFtyb3ddW2NvbF0gfHwgZ3JpZFtyb3ddW2NvbF0uaGFzQmVlbkhpdCk7XG4gICAgcmV0dXJuIFtyb3csIGNvbF07XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgbW92ZXNBcnJheVdpdGhvdXRMYXN0TW92ZSA9IHBhc3RNb3Zlcy5maWx0ZXIoKG1vdmUsIGluZCkgPT4gaW5kICE9PSBsYXN0TW92ZUxvYyk7XG4gICAgcmV0dXJuIHBpY2tDb21wdXRlck1vdmUobW92ZXNBcnJheVdpdGhvdXRMYXN0TW92ZSwgZW5lbXkpO1xuICB9XG59O1xuY29uc3QgZmluZERpcmVjdGlvbmFsSW5jcmVtZW50ID0gKHBhc3RNb3ZlcykgPT4ge1xuICBjb25zdCBsYXN0TW92ZSA9IHBhc3RNb3Zlc1twYXN0TW92ZXMubGVuZ3RoIC0gMV07XG4gIGNvbnN0IG1vdmVCZWZvcmVMYXN0ID0gcGFzdE1vdmVzW3Bhc3RNb3Zlcy5sZW5ndGggLSAyXTtcbiAgcmV0dXJuIFtsYXN0TW92ZS5yb3cgLSBtb3ZlQmVmb3JlTGFzdC5yb3csIGxhc3RNb3ZlLmNvbCAtIG1vdmVCZWZvcmVMYXN0LmNvbF07XG59O1xuZXhwb3J0IHtcbiAgcGxhY2VBbGxTaGlwcyxcbiAgcmFuZG9tbHlQbGFjZVNoaXAsXG4gIGdldFJhbmRvbUNvb3JkaW5hdGVzLFxuICBhcmVTcGFjZXNBdmFpbGFibGVGb3JTaGlwLFxuICBwaWNrQ29tcHV0ZXJNb3ZlLFxuICBmaW5kRGlyZWN0aW9uYWxJbmNyZW1lbnQsXG59O1xuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcGx1c3BsdXMgKi9cbmNvbnN0IFNoaXAgPSAobGVuZ3RoLCBuYW1lID0gJ3VubmFtZWQnKSA9PiB7XG4gIGxldCBpc0hvcml6b250YWwgPSB0cnVlO1xuICBjb25zdCB0dXJuU2hpcCA9ICgpID0+IHtcbiAgICBpc0hvcml6b250YWwgPSAhaXNIb3Jpem9udGFsO1xuICB9O1xuICBjb25zdCBoaXRTcGFjZXMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIGhpdFNwYWNlcy5wdXNoKGZhbHNlKTtcbiAgfVxuICBjb25zdCBjb29yZGluYXRlcyA9IFtdO1xuICBjb25zdCBoaXQgPSAocG9zaXRpb24pID0+IHtcbiAgICBoaXRTcGFjZXNbcG9zaXRpb25dID0gdHJ1ZTtcbiAgfTtcbiAgY29uc3QgaXNTdW5rID0gKCkgPT4ge1xuICAgIGlmIChoaXRTcGFjZXMuaW5kZXhPZihmYWxzZSkgPT09IC0xKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuICByZXR1cm4ge1xuICAgIGdldCBpc0hvcml6b250YWwoKSB7XG4gICAgICByZXR1cm4gaXNIb3Jpem9udGFsO1xuICAgIH0sXG4gICAgdHVyblNoaXAsXG4gICAgbGVuZ3RoLFxuICAgIG5hbWUsXG4gICAgY29vcmRpbmF0ZXMsXG4gICAgaGl0U3BhY2VzLFxuICAgIGhpdCxcbiAgICBpc1N1bmssXG4gIH07XG59O1xuXG5jb25zdCBHYW1lYm9hcmQgPSAoKSA9PiB7XG4gIGNvbnN0IGdyaWQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgZ3JpZC5wdXNoKFtdKTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IDEwOyBuKyspIHtcbiAgICAgIGdyaWRbaV0ucHVzaCh7IGhhc0JlZW5IaXQ6IGZhbHNlIH0pO1xuICAgIH1cbiAgfVxuICBjb25zdCBwbGFjZVNoaXAgPSAoc2hpcCwgeSwgeCkgPT4ge1xuICAgIGxldCByb3cgPSB5O1xuICAgIGxldCBjb2wgPSB4O1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHNoaXAuaXNIb3Jpem9udGFsKSB7XG4gICAgICAgIGNvbCA9IHggKyBpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcm93ID0geSArIGk7XG4gICAgICB9XG4gICAgICBncmlkW3Jvd11bY29sXSA9IHsgc2hpcCwgcG9zaXRpb246IGksIGhhc0JlZW5IaXQ6IGZhbHNlIH07XG4gICAgICBzaGlwLmNvb3JkaW5hdGVzLnB1c2goeyByb3csIGNvbCB9KTtcbiAgICB9XG4gIH07XG4gIGNvbnN0IHJlY2VpdmVBdHRhY2sgPSAoeSwgeCkgPT4ge1xuICAgIGNvbnN0IHRhcmdldCA9IGdyaWRbeV1beF07XG4gICAgaWYgKHRhcmdldC5zaGlwKSB7XG4gICAgICB0YXJnZXQuc2hpcC5oaXQodGFyZ2V0LnBvc2l0aW9uKTtcbiAgICB9XG4gICAgdGFyZ2V0Lmhhc0JlZW5IaXQgPSB0cnVlO1xuICB9O1xuICBjb25zdCBhbGxTaGlwc0FyZVN1bmsgPSAoKSA9PiB7XG4gICAgY29uc3Qgc2hpcHMgPSBbXTtcbiAgICBncmlkLmZvckVhY2goKHJvdykgPT4ge1xuICAgICAgcm93LmZvckVhY2goKHNwYWNlKSA9PiB7XG4gICAgICAgIGlmIChzcGFjZS5wb3NpdGlvbiA9PT0gMCkge1xuICAgICAgICAgIHNoaXBzLnB1c2goc3BhY2Uuc2hpcCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHJldHVybiBzaGlwcy5ldmVyeSgoc2hpcCkgPT4gc2hpcC5pc1N1bmsoKSk7XG4gIH07XG4gIHJldHVybiB7XG4gICAgZ3JpZCxcbiAgICBwbGFjZVNoaXAsXG4gICAgcmVjZWl2ZUF0dGFjayxcbiAgICBhbGxTaGlwc0FyZVN1bmssXG4gIH07XG59O1xuY29uc3QgUGxheWVyID0gKG5hbWUpID0+IHtcbiAgY29uc3QgZ2FtZWJvYXJkID0gR2FtZWJvYXJkKCk7XG4gIGxldCBpc0h1bWFuID0gdHJ1ZTtcbiAgY29uc3QgdG9nZ2xlUGxheWVyQ29udHJvbGxlciA9ICgpID0+IHtcbiAgICBpc0h1bWFuID0gIWlzSHVtYW47XG4gIH07XG4gIGxldCBjdXJyZW50VHVybiA9IGZhbHNlO1xuICBjb25zdCBjaGFuZ2VUdXJuID0gKCkgPT4ge1xuICAgIGN1cnJlbnRUdXJuID0gIWN1cnJlbnRUdXJuO1xuICB9O1xuICBjb25zdCBzaGlwcyA9IFtcbiAgICBTaGlwKDUsICdBaXJjcmFmdCBDYXJyaWVyJyksXG4gICAgU2hpcCg0LCAnQmF0dGxlc2hpcCcpLFxuICAgIFNoaXAoMywgJ0NydWlzZXInKSxcbiAgICBTaGlwKDMsICdTdWJtYXJpbmUnKSxcbiAgICBTaGlwKDIsICdEZXN0cm95ZXInKSxcbiAgXTtcbiAgY29uc3QgbW92ZXMgPSBbXTtcbiAgY29uc3QgYXR0YWNrID0gKGVuZW15LCB5LCB4KSA9PiB7XG4gICAgY29uc3QgZW5lbXlCb2FyZCA9IGVuZW15LmdhbWVib2FyZDtcbiAgICBlbmVteUJvYXJkLnJlY2VpdmVBdHRhY2soeSwgeCk7XG4gICAgbW92ZXMucHVzaCh7IHJvdzogeSwgY29sOiB4IH0pO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgZ2FtZWJvYXJkLFxuICAgIG5hbWUsXG4gICAgdG9nZ2xlUGxheWVyQ29udHJvbGxlcixcbiAgICBnZXQgaXNIdW1hbigpIHtcbiAgICAgIHJldHVybiBpc0h1bWFuO1xuICAgIH0sXG4gICAgY2hhbmdlVHVybixcbiAgICBnZXQgY3VycmVudFR1cm4oKSB7XG4gICAgICByZXR1cm4gY3VycmVudFR1cm47XG4gICAgfSxcbiAgICBzaGlwcyxcbiAgICBhdHRhY2ssXG4gICAgbW92ZXMsXG4gIH07XG59O1xuXG5leHBvcnQgeyBTaGlwLCBHYW1lYm9hcmQsIFBsYXllciB9O1xuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUgKi9cbmltcG9ydCAqIGFzIGNvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyJztcbmltcG9ydCAqIGFzIG1vZGVsIGZyb20gJy4vbW9kZWwnO1xuXG5sZXQgcDE7XG5sZXQgcDI7XG5cbmNvbnN0IHNldHVwR2FtZSA9ICgpID0+IHtcbiAgcDEgPSBtb2RlbC5QbGF5ZXIoJ3AxJyk7XG4gIHAyID0gbW9kZWwuUGxheWVyKCdwMicpO1xuICBjb250cm9sbGVyLnBsYWNlQWxsU2hpcHMocDEpO1xuICBjb250cm9sbGVyLnBsYWNlQWxsU2hpcHMocDIpO1xuICBjb25zdCBwMUdyaWQgPSBjcmVhdGVHcmlkKCk7XG4gIGNvbnN0IHAyR3JpZCA9IGNyZWF0ZUdyaWQoKTtcblxuICBjb25zdCB1aUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB1aUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd1aS1jb250YWluZXInKTtcbiAgY29uc3QgZ2FtZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBnYW1lQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2dhbWUtY29udGFpbmVyJyk7XG4gIGdhbWVDb250YWluZXIuYXBwZW5kKHAxR3JpZCwgcDJHcmlkKTtcbiAgZGlzcGxheVNoaXBzT25HcmlkKHAxLCBwMUdyaWQpO1xuICBkaXNwbGF5U2hpcHNPbkdyaWQocDIsIHAyR3JpZCk7XG4gIGNvbnN0IG5leHRCdXR0b24gPSBjcmVhdGVOZXh0VHVybkJ1dHRvbigpO1xuICB1aUNvbnRhaW5lci5hcHBlbmQoY3JlYXRlTmFtZUVsZW1lbnRzKCksIG5leHRCdXR0b24sIGNyZWF0ZUF0dGFja1Jlc3VsdCgpLCBjcmVhdGVNYXRjaFJlc3VsdCgpKTtcblxuICBjb25zdCB7IGJvZHkgfSA9IGRvY3VtZW50O1xuICBib2R5LmFwcGVuZChnYW1lQ29udGFpbmVyLCB1aUNvbnRhaW5lcik7XG4gIGFzc2lnbkFsbFNoaXBTcGFjZXNDbGFzcygpO1xuICBhZGRBdHRhY2tMaXN0ZW5lcnMoKTtcbiAgcDFHcmlkLmNsYXNzTGlzdC5hZGQoJ2dyaWQtdW5jbGlja2FibGUnKTtcbiAgcDJHcmlkLmNsYXNzTGlzdC5hZGQoJ2dyaWQtdW5jbGlja2FibGUnKTtcblxuICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRUdXJuKTtcbn07XG5cbmNvbnN0IGNyZWF0ZUdyaWQgPSAoKSA9PiB7XG4gIGNvbnN0IGdyaWRPdXRlckNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICBncmlkT3V0ZXJDb250YWluZXIuY2xhc3NMaXN0LmFkZCgnZ3JpZC1vdXRlckNvbnRhaW5lcicpO1xuICBjb25zdCBncmlkSW5uZXJDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgZ3JpZElubmVyQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2dyaWQtaW5uZXJDb250YWluZXInKTtcblxuICBjb25zdCBudW1BcnJheSA9IFsuLi5BcnJheSgxMSkua2V5cygpXS5zcGxpY2UoMSk7XG4gIGNvbnN0IGNoYXJBcnJheSA9IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwIH0sIChfLCBsb2MpID0+XG4gICAgU3RyaW5nLmZyb21DaGFyQ29kZSgnQScuY2hhckNvZGVBdCgwKSArIGxvYylcbiAgKTtcblxuICBmb3IgKGxldCBpID0gLTE7IGkgPCAxMDsgaSsrKSB7XG4gICAgZm9yIChsZXQgbiA9IC0xOyBuIDwgMTA7IG4rKykge1xuICAgICAgY29uc3Qgc3BhY2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHNwYWNlLmNsYXNzTGlzdC5hZGQoJ2dyaWQtc3BhY2UnKTtcbiAgICAgIGNvbnN0IHNwYWNlQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgc3BhY2VDb250ZW50LmNsYXNzTGlzdC5hZGQoJ2dyaWQtc3BhY2VDb250ZW50Jyk7XG4gICAgICBpZiAoaSA9PT0gLTEgJiYgbiA+IC0xKSB7XG4gICAgICAgIHNwYWNlQ29udGVudC50ZXh0Q29udGVudCA9IG51bUFycmF5W25dO1xuICAgICAgfSBlbHNlIGlmIChpID4gLTEgJiYgbiA9PT0gLTEpIHtcbiAgICAgICAgc3BhY2VDb250ZW50LnRleHRDb250ZW50ID0gY2hhckFycmF5W2ldO1xuICAgICAgfSBlbHNlIGlmIChpID4gLTEgJiYgbiA+IC0xKSB7XG4gICAgICAgIHNwYWNlLmNsYXNzTGlzdC5hZGQoJ2dyaWQtc3BhY2UtZW1wdHknKTtcbiAgICAgIH1cbiAgICAgIHNwYWNlLmRhdGFzZXQucm93ID0gaTtcbiAgICAgIHNwYWNlLmRhdGFzZXQuY29sID0gbjtcbiAgICAgIHNwYWNlLmFwcGVuZChzcGFjZUNvbnRlbnQpO1xuICAgICAgZ3JpZElubmVyQ29udGFpbmVyLmFwcGVuZChzcGFjZSk7XG4gICAgfVxuICB9XG4gIGdyaWRPdXRlckNvbnRhaW5lci5hcHBlbmQoZ3JpZElubmVyQ29udGFpbmVyKTtcbiAgcmV0dXJuIGdyaWRPdXRlckNvbnRhaW5lcjtcbn07XG5jb25zdCBkaXNwbGF5U2hpcHNPbkdyaWQgPSAocGxheWVyLCBncmlkRWxlbWVudCkgPT4ge1xuICBjb25zdCBwR3JpZCA9IHBsYXllci5nYW1lYm9hcmQuZ3JpZDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwR3JpZC5sZW5ndGg7IGkrKykge1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgcEdyaWRbMF0ubGVuZ3RoOyBuKyspIHtcbiAgICAgIGlmIChwR3JpZFtpXVtuXS5wb3NpdGlvbiA9PT0gMCkge1xuICAgICAgICBkaXNwbGF5T25lU2hpcChpLCBuLCBwR3JpZFtpXVtuXS5zaGlwLCBncmlkRWxlbWVudCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuY29uc3QgZGlzcGxheU9uZVNoaXAgPSAoeSwgeCwgc2hpcCwgZ3JpZEVsZW1lbnQpID0+IHtcbiAgbGV0IHJvdyA9IHk7XG4gIGxldCBjb2wgPSB4O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc2hpcC5pc0hvcml6b250YWwpIHtcbiAgICAgIGNvbCA9IHggKyBpO1xuICAgIH0gZWxzZSB7XG4gICAgICByb3cgPSB5ICsgaTtcbiAgICB9XG4gICAgY29uc3Qgc2hpcFNwYWNlID0gZ3JpZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAuZ3JpZC1zcGFjZVtkYXRhLXJvdz1cIiR7cm93fVwiXVtkYXRhLWNvbD1cIiR7Y29sfVwiXWBcbiAgICApO1xuICAgIGNvbnN0IHNoaXBTcGFjZUNvbnRlbnQgPSBzaGlwU3BhY2UucXVlcnlTZWxlY3RvcignLmdyaWQtc3BhY2VDb250ZW50Jyk7XG4gICAgc2hpcFNwYWNlLmNsYXNzTGlzdC5hZGQoJ2dyaWQtc3BhY2Utb2NjdXBpZWQnKTtcbiAgICBzaGlwU3BhY2UuY2xhc3NMaXN0LnJlbW92ZSgnZ3JpZC1zcGFjZS1lbXB0eScpO1xuICAgIGlmICghc2hpcC5oaXRTcGFjZXNbaV0pIHtcbiAgICAgIHNoaXBTcGFjZUNvbnRlbnQudGV4dENvbnRlbnQgPSBzaGlwLm5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuICB9XG59O1xuY29uc3QgYXNzaWduQWxsU2hpcFNwYWNlc0NsYXNzID0gKCkgPT4ge1xuICBjb25zdCBncmlkRWxlbWVudHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3JpZC1vdXRlckNvbnRhaW5lcicpO1xuICBjb25zdCBwbGF5ZXJHcmlkcyA9IFtwMS5nYW1lYm9hcmQuZ3JpZCwgcDIuZ2FtZWJvYXJkLmdyaWRdO1xuXG4gIGdyaWRFbGVtZW50cy5mb3JFYWNoKChncmlkLCBpbmRleCkgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGxheWVyR3JpZHNbaW5kZXhdLmxlbmd0aDsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHBsYXllckdyaWRzW2luZGV4XVswXS5sZW5ndGg7IG4rKykge1xuICAgICAgICBpZiAocGxheWVyR3JpZHNbaW5kZXhdW2ldW25dLnNoaXApIHtcbiAgICAgICAgICBjb25zdCBzcGFjZSA9IGdyaWQucXVlcnlTZWxlY3RvcihgLmdyaWQtc3BhY2VbZGF0YS1yb3c9XCIke2l9XCJdW2RhdGEtY29sPVwiJHtufVwiXWApO1xuICAgICAgICAgIHNwYWNlLmNsYXNzTGlzdC5hZGQoJ2dyaWQtc3BhY2Utc2hpcEhvbGQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSk7XG59O1xuY29uc3QgZGlzcGxheUhpdHMgPSAocGxheWVyLCBncmlkRWxlbWVudCkgPT4ge1xuICBjb25zdCBncmlkT2JqID0gcGxheWVyLmdhbWVib2FyZC5ncmlkO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGdyaWRPYmoubGVuZ3RoOyBpKyspIHtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IGdyaWRPYmpbMF0ubGVuZ3RoOyBuKyspIHtcbiAgICAgIGlmIChncmlkT2JqW2ldW25dLmhhc0JlZW5IaXQpIHtcbiAgICAgICAgY29uc3Qgc3BhY2UgPSBncmlkRWxlbWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1yb3c9XCIke2l9XCJdW2RhdGEtY29sPVwiJHtufVwiXWApO1xuICAgICAgICBzcGFjZS5jbGFzc0xpc3QuYWRkKCdncmlkLXNwYWNlLWhpdCcpO1xuICAgICAgICBpZiAoZ3JpZE9ialtpXVtuXS5zaGlwKSB7XG4gICAgICAgICAgaWYgKCFzcGFjZS5jbGFzc0xpc3QuY29udGFpbnMoJ2dyaWQtc3BhY2Utb2NjdXBpZWQnKSkge1xuICAgICAgICAgICAgc3BhY2UuY2xhc3NMaXN0LmFkZCgnZ3JpZC1zcGFjZS1zZWNyZXRseU9jY3VwaWVkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuY29uc3QgY3JlYXRlTmFtZUVsZW1lbnRzID0gKCkgPT4ge1xuICBjb25zdCBwbGF5ZXJOYW1lc0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcGxheWVyTmFtZXNFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3VpLXBsYXllck5hbWVzJyk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XG4gICAgY29uc3QgbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBuYW1lRWxlbWVudC5jbGFzc0xpc3QuYWRkKCd1aS1uYW1lJyk7XG4gICAgbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBbcDEubmFtZSwgcDIubmFtZV1baV07XG4gICAgY29uc3QgcGxheWVyVHlwZUNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHBsYXllclR5cGVDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndWktcGxheWVyVHlwZUNvbnRhaW5lcicpO1xuICAgIGNvbnN0IHBsYXllclR5cGVMYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7XG4gICAgcGxheWVyVHlwZUxhYmVsLnRleHRDb250ZW50ID0gJ0NvbXB1dGVyPyc7XG4gICAgcGxheWVyVHlwZUxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgYHAke2kgKyAxfS10eXBlYCk7XG4gICAgcGxheWVyVHlwZUxhYmVsLmNsYXNzTGlzdC5hZGQoJ3VpLXBsYXllclR5cGVMYWJlbCcpO1xuICAgIGNvbnN0IHR5cGVUb2dnbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgIHR5cGVUb2dnbGUudHlwZSA9ICdjaGVja2JveCc7XG4gICAgdHlwZVRvZ2dsZS5pZCA9IGBwJHtpICsgMX0tdHlwZWA7XG4gICAgdHlwZVRvZ2dsZS5jbGFzc0xpc3QuYWRkKCd1aS1wbGF5ZXJUeXBlQ2hlY2tib3gnKTtcbiAgICBwbGF5ZXJUeXBlQ29udGFpbmVyLmFwcGVuZChwbGF5ZXJUeXBlTGFiZWwsIHR5cGVUb2dnbGUpO1xuICAgIHBsYXllck5hbWVzRWxlbWVudC5hcHBlbmQobmFtZUVsZW1lbnQsIHBsYXllclR5cGVDb250YWluZXIpO1xuICB9XG4gIHJldHVybiBwbGF5ZXJOYW1lc0VsZW1lbnQ7XG59O1xuY29uc3QgaGFuZGxlUGxheWVyVHlwZVRvZ2dsZXMgPSAoKSA9PiB7XG4gIGNvbnN0IHR5cGVUb2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpLXBsYXllclR5cGVDaGVja2JveCcpO1xuICBjb25zdCBuZXh0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVpLW5leHRCdXR0b24nKTtcbiAgY29uc3Qgb3JpZ2luYWxTZXR0aW5ncyA9IFt0eXBlVG9nZ2xlc1swXS5jaGVja2VkLCB0eXBlVG9nZ2xlc1sxXS5jaGVja2VkXTtcbiAgY29uc3Qgb3JpZ2luYWxCdXR0b25UZXh0ID0gW107XG4gIGNvbnN0IGlzQnV0dG9uVW5jbGlja2FibGUgPSBbXTtcblxuICB0eXBlVG9nZ2xlcy5mb3JFYWNoKCh0b2dnbGUsIGluZGV4KSA9PiB7XG4gICAgdG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgICAgIG9yaWdpbmFsQnV0dG9uVGV4dC5wdXNoKG5leHRCdXR0b24udGV4dENvbnRlbnQpO1xuICAgICAgaXNCdXR0b25VbmNsaWNrYWJsZS5wdXNoKG5leHRCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCd1aS1uZXh0QnV0dG9uLXVuY2xpY2thYmxlJykpO1xuICAgICAgaWYgKFxuICAgICAgICB0b2dnbGUuY2hlY2tlZCAhPT0gb3JpZ2luYWxTZXR0aW5nc1tpbmRleF0gfHxcbiAgICAgICAgdHlwZVRvZ2dsZXNbMSAtIGluZGV4XS5jaGVja2VkICE9PSBvcmlnaW5hbFNldHRpbmdzWzEgLSBpbmRleF1cbiAgICAgICkge1xuICAgICAgICBuZXh0QnV0dG9uLnRleHRDb250ZW50ID0gJ1Jlc3RhcnQgZ2FtZT8nO1xuICAgICAgICBuZXh0QnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRUdXJuKTtcbiAgICAgICAgbmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc3RhcnRHYW1lKTtcbiAgICAgICAgaWYgKGlzQnV0dG9uVW5jbGlja2FibGVbMF0pIHtcbiAgICAgICAgICBuZXh0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ3VpLW5leHRCdXR0b24tdW5jbGlja2FibGUnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbmV4dEJ1dHRvbi50ZXh0Q29udGVudCA9IG9yaWdpbmFsQnV0dG9uVGV4dFswXTtcbiAgICAgICAgbmV4dEJ1dHRvbi5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHJlc3RhcnRHYW1lKTtcbiAgICAgICAgbmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0VHVybik7XG4gICAgICAgIGlmIChpc0J1dHRvblVuY2xpY2thYmxlWzBdKSB7XG4gICAgICAgICAgbmV4dEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd1aS1uZXh0QnV0dG9uLXVuY2xpY2thYmxlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59O1xuY29uc3QgY3JlYXRlTmV4dFR1cm5CdXR0b24gPSAoKSA9PiB7XG4gIGNvbnN0IGJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICBidG4uY2xhc3NMaXN0LmFkZCgndWktbmV4dEJ1dHRvbicpO1xuICBidG4udGV4dENvbnRlbnQgPSAnU3RhcnQgZ2FtZSc7XG4gIHJldHVybiBidG47XG59O1xuY29uc3QgY3JlYXRlQXR0YWNrUmVzdWx0ID0gKCkgPT4ge1xuICBjb25zdCByZXN1bHRDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgcmVzdWx0Q29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ3VpLXJlc3VsdENvbnRhaW5lcicpO1xuICByZXN1bHRDb250YWluZXIudGV4dENvbnRlbnQgPSAnVGFyZ2V0IGhpdDogJztcbiAgY29uc3QgcmVzdWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICByZXN1bHQuY2xhc3NMaXN0LmFkZCgndWktcmVzdWx0Jyk7XG4gIHJlc3VsdC50ZXh0Q29udGVudCA9ICd0ZXN0JztcbiAgcmVzdWx0Q29udGFpbmVyLmFwcGVuZChyZXN1bHQpO1xuICByZXN1bHRDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndWktcmVzdWx0Q29udGFpbmVyLWhpZGRlbicpO1xuICByZXR1cm4gcmVzdWx0Q29udGFpbmVyO1xufTtcbmNvbnN0IGNyZWF0ZU1hdGNoUmVzdWx0ID0gKCkgPT4ge1xuICBjb25zdCByZXN1bHRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICByZXN1bHRFbC5jbGFzc0xpc3QuYWRkKCd1aS1tYXRjaFJlc3VsdCcpO1xuICByZXN1bHRFbC5jbGFzc0xpc3QuYWRkKCd1aS1tYXRjaFJlc3VsdC1oaWRkZW4nKTtcbiAgcmV0dXJuIHJlc3VsdEVsO1xufTtcbmNvbnN0IGVuYWJsZU5leHRUdXJuQnV0dG9uID0gKCkgPT4ge1xuICBjb25zdCBuZXh0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVpLW5leHRCdXR0b24nKTtcbiAgbmV4dEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHN0YXJ0VHVybik7XG59O1xuY29uc3Qgc3RhcnRUdXJuID0gKCkgPT4ge1xuICBjb25zdCBuZXh0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVpLW5leHRCdXR0b24nKTtcbiAgbmV4dEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCd1aS1uZXh0QnV0dG9uLXVuY2xpY2thYmxlJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51aS1yZXN1bHRDb250YWluZXInKS5jbGFzc0xpc3QuYWRkKCd1aS1yZXN1bHRDb250YWluZXItaGlkZGVuJyk7XG4gIGNvbnN0IFtncmlkMSwgZ3JpZDJdID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuZ3JpZC1vdXRlckNvbnRhaW5lcicpKTtcbiAgY29uc3QgbmFtZUVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpLW5hbWUnKTtcblxuICBpZiAoIXAxLmN1cnJlbnRUdXJuICYmICFwMi5jdXJyZW50VHVybikge1xuICAgIHAxLmNoYW5nZVR1cm4oKTtcbiAgICBncmlkMS5jbGFzc0xpc3QuYWRkKCdncmlkLXVuY2xpY2thYmxlJyk7XG4gICAgbmV4dEJ1dHRvbi50ZXh0Q29udGVudCA9ICdOZXh0IHR1cm4nO1xuICAgIG5hbWVFbGVtZW50c1swXS5jbGFzc0xpc3QuYWRkKCd1aS1uYW1lLWN1cnJlbnQnKTtcbiAgICBpZiAoIXAxLmlzSHVtYW4gfHwgIXAyLmlzSHVtYW4pIHtcbiAgICAgIGlmICghcDEuaXNIdW1hbikge1xuICAgICAgICB0b2dnbGVTaGlwVmlzaWJpbGl0eShncmlkMSk7XG4gICAgICB9XG4gICAgICBpZiAoIXAyLmlzSHVtYW4pIHtcbiAgICAgICAgdG9nZ2xlU2hpcFZpc2liaWxpdHkoZ3JpZDIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGVTaGlwVmlzaWJpbGl0eShncmlkMik7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHAxLmNoYW5nZVR1cm4oKTtcbiAgICBwMi5jaGFuZ2VUdXJuKCk7XG4gICAgaWYgKHAxLmlzSHVtYW4gJiYgcDIuaXNIdW1hbikge1xuICAgICAgdG9nZ2xlU2hpcFZpc2liaWxpdHkoZ3JpZDIpO1xuICAgICAgdG9nZ2xlU2hpcFZpc2liaWxpdHkoZ3JpZDEpO1xuICAgIH1cbiAgICBuYW1lRWxlbWVudHMuZm9yRWFjaCgobmFtZSkgPT4gbmFtZS5jbGFzc0xpc3QudG9nZ2xlKCd1aS1uYW1lLWN1cnJlbnQnKSk7XG4gIH1cbiAgY29uc3QgY3VycmVudFBsYXllciA9IHAxLmN1cnJlbnRUdXJuID8gcDEgOiBwMjtcbiAgY29uc3QgZW5lbXlHcmlkID0gcDEuY3VycmVudFR1cm4gPyBncmlkMiA6IGdyaWQxO1xuICBpZiAoY3VycmVudFBsYXllci5pc0h1bWFuKSB7XG4gICAgZW5lbXlHcmlkLmNsYXNzTGlzdC5yZW1vdmUoJ2dyaWQtdW5jbGlja2FibGUnKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjdXJyZW50RW5lbXkgPSBwMS5jdXJyZW50VHVybiA/IHAyIDogcDE7XG4gICAgY29uc3QgW3JvdywgY29sXSA9IGNvbnRyb2xsZXIucGlja0NvbXB1dGVyTW92ZShjdXJyZW50UGxheWVyLm1vdmVzLCBjdXJyZW50RW5lbXkpO1xuICAgIGNvbnN0IHRhcmdldFNwYWNlID0gZW5lbXlHcmlkLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmdyaWQtc3BhY2VbZGF0YS1yb3c9XCIke3Jvd31cIl1bZGF0YS1jb2w9XCIke2NvbH1cIl1gXG4gICAgKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGF0dGFja0hhbmRsZXIoZW5lbXlHcmlkLCBjdXJyZW50UGxheWVyLCBjdXJyZW50RW5lbXksIHRhcmdldFNwYWNlKTtcbiAgICB9LCA0MDApO1xuICB9XG59O1xuY29uc3QgdG9nZ2xlU2hpcFZpc2liaWxpdHkgPSAoZ3JpZEVsZW1lbnQpID0+IHtcbiAgY29uc3Qgc2hpcFNwYWNlcyA9IGdyaWRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5ncmlkLXNwYWNlLXNoaXBIb2xkJyk7XG4gIHNoaXBTcGFjZXMuZm9yRWFjaCgoc3BhY2UpID0+IHtcbiAgICBzcGFjZS5jbGFzc0xpc3QudG9nZ2xlKCdncmlkLXNwYWNlLW9jY3VwaWVkJyk7XG4gICAgaWYgKHNwYWNlLmNsYXNzTGlzdC5jb250YWlucygnZ3JpZC1zcGFjZS1oaXQnKSkge1xuICAgICAgc3BhY2UuY2xhc3NMaXN0LnRvZ2dsZSgnZ3JpZC1zcGFjZS1zZWNyZXRseU9jY3VwaWVkJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwYWNlLmNsYXNzTGlzdC50b2dnbGUoJ2dyaWQtc3BhY2UtZW1wdHknKTtcbiAgICB9XG4gIH0pO1xufTtcbmNvbnN0IGFkZEF0dGFja0xpc3RlbmVycyA9ICgpID0+IHtcbiAgY29uc3QgZ3JpZEVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmdyaWQtb3V0ZXJDb250YWluZXInKTtcbiAgY29uc3QgcGxheWVycyA9IFtwMiwgcDFdO1xuICBwbGF5ZXJzLmZvckVhY2goKHAsIGluZGV4KSA9PiB7XG4gICAgaWYgKHAuaXNIdW1hbikge1xuICAgICAgY29uc3QgZW5lbXlTcGFjZXMgPSBnZXRBbGxTcGFjZUVsZW1lbnRzKGdyaWRFbGVtZW50c1tpbmRleF0pO1xuICAgICAgZW5lbXlTcGFjZXMuZm9yRWFjaCgoc3BhY2UpID0+XG4gICAgICAgIHNwYWNlLmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgJ2NsaWNrJyxcbiAgICAgICAgICAoZSkgPT4ge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgYXR0YWNrSGFuZGxlcihncmlkRWxlbWVudHNbaW5kZXhdLCBwLCBwbGF5ZXJzWzEgLSBpbmRleF0sIHNwYWNlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHsgb25jZTogdHJ1ZSB9XG4gICAgICAgIClcbiAgICAgICk7XG4gICAgfVxuICB9KTtcbn07XG5jb25zdCBhdHRhY2tIYW5kbGVyID0gKGdyaWRFbGVtZW50LCBwbGF5ZXIsIGVuZW15LCBzcGFjZSkgPT4ge1xuICBjb25zdCBzdWNjZXNzZnVsQXR0YWNrID0gbGF1bmNoQXR0YWNrKHNwYWNlLCBwbGF5ZXIsIGVuZW15KTtcbiAgZGlzcGxheU5ld0hpdChzcGFjZSwgZW5lbXksIGdyaWRFbGVtZW50KTtcbiAgaWYgKHN1Y2Nlc3NmdWxBdHRhY2spIHtcbiAgICBncmlkRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdncmlkLXVuY2xpY2thYmxlJyk7XG4gICAgY29uc3QgbmV4dEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51aS1uZXh0QnV0dG9uJyk7XG4gICAgbmV4dEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCd1aS1uZXh0QnV0dG9uLXVuY2xpY2thYmxlJyk7XG4gICAgZGlzcGxheUF0dGFja1Jlc3VsdChlbmVteSwgc3BhY2UpO1xuICAgIGlmIChlbmVteSA9PT0gcDEpIHtcbiAgICAgIGNvbnN0IFtwMVN1Y2Nlc3MsIHAyU3VjY2Vzc10gPSBbXG4gICAgICAgIHAyLmdhbWVib2FyZC5hbGxTaGlwc0FyZVN1bmsoKSxcbiAgICAgICAgcDEuZ2FtZWJvYXJkLmFsbFNoaXBzQXJlU3VuaygpLFxuICAgICAgXTtcbiAgICAgIGlmIChwMVN1Y2Nlc3MgJiYgcDJTdWNjZXNzKSB7XG4gICAgICAgIGVuZEdhbWUoJ3RpZScpO1xuICAgICAgfSBlbHNlIGlmIChwMVN1Y2Nlc3MpIHtcbiAgICAgICAgZW5kR2FtZShwMS5uYW1lKTtcbiAgICAgIH0gZWxzZSBpZiAocDJTdWNjZXNzKSB7XG4gICAgICAgIGVuZEdhbWUocDIubmFtZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuY29uc3QgbGF1bmNoQXR0YWNrID0gKHNwYWNlLCBwbGF5ZXIsIGVuZW15KSA9PiB7XG4gIGNvbnN0IHRhcmdldCA9IFtzcGFjZS5kYXRhc2V0LnJvdywgc3BhY2UuZGF0YXNldC5jb2xdO1xuICBpZiAoZW5lbXkuZ2FtZWJvYXJkLmdyaWRbdGFyZ2V0WzBdXVt0YXJnZXRbMV1dLmhhc0JlZW5IaXQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcGxheWVyLmF0dGFjayhlbmVteSwgLi4udGFyZ2V0KTtcbiAgcmV0dXJuIHRydWU7XG59O1xuY29uc3QgZGlzcGxheU5ld0hpdCA9IChzcGFjZSwgZW5lbXksIGdyaWRFbGVtZW50KSA9PiB7XG4gIHNwYWNlLmNsYXNzTGlzdC5hZGQoJ2dyaWQtc3BhY2UtaGl0Jyk7XG4gIGNvbnN0IHsgc2hpcCB9ID0gZW5lbXkuZ2FtZWJvYXJkLmdyaWRbc3BhY2UuZGF0YXNldC5yb3ddW3NwYWNlLmRhdGFzZXQuY29sXTtcbiAgaWYgKHNoaXApIHtcbiAgICBpZiAoIXNwYWNlLmNsYXNzTGlzdC5jb250YWlucygnZ3JpZC1zcGFjZS1vY2N1cGllZCcpKSB7XG4gICAgICBzcGFjZS5jbGFzc0xpc3QuYWRkKCdncmlkLXNwYWNlLXNlY3JldGx5T2NjdXBpZWQnKTtcbiAgICB9XG4gICAgaWYgKHNoaXAuaXNTdW5rKCkpIHtcbiAgICAgIGNvbnN0IGNvb3JkcyA9IHNoaXAuY29vcmRpbmF0ZXM7XG4gICAgICBjb25zdCBvcmllbnRhdGlvbiA9IHNoaXAuaXNIb3Jpem9udGFsID8gJ2hvcml6b250YWwnIDogJ3ZlcnRpY2FsJztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29vcmRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHN1bmtTcGFjZSA9IGdyaWRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICAgYC5ncmlkLXNwYWNlW2RhdGEtcm93PVwiJHtjb29yZHNbaV0ucm93fVwiXVtkYXRhLWNvbD1cIiR7Y29vcmRzW2ldLmNvbH1cIl1gXG4gICAgICAgICk7XG4gICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHN1bmtTcGFjZS5jbGFzc0xpc3QuYWRkKGBncmlkLXN1bmtTcGFjZS0ke29yaWVudGF0aW9ufVN0YXJ0YCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIGNvb3Jkcy5sZW5ndGggLSAxOlxuICAgICAgICAgICAgc3Vua1NwYWNlLmNsYXNzTGlzdC5hZGQoYGdyaWQtc3Vua1NwYWNlLSR7b3JpZW50YXRpb259RW5kYCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgc3Vua1NwYWNlLmNsYXNzTGlzdC5hZGQoYGdyaWQtc3Vua1NwYWNlLSR7b3JpZW50YXRpb259TWlkZGxlYCk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbmNvbnN0IGRpc3BsYXlBdHRhY2tSZXN1bHQgPSAoZW5lbXksIHNwYWNlKSA9PiB7XG4gIGNvbnN0IHsgc2hpcCB9ID0gZW5lbXkuZ2FtZWJvYXJkLmdyaWRbc3BhY2UuZGF0YXNldC5yb3ddW3NwYWNlLmRhdGFzZXQuY29sXTtcbiAgaWYgKHNoaXApIHtcbiAgICBjb25zdCByZXN1bHRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVpLXJlc3VsdCcpO1xuICAgIHJlc3VsdEVsZW1lbnQudGV4dENvbnRlbnQgPSBzaGlwLm5hbWU7XG4gICAgY29uc3QgcmVzdWx0Q29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnVpLXJlc3VsdENvbnRhaW5lcicpO1xuICAgIHJlc3VsdENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCd1aS1yZXN1bHRDb250YWluZXItaGlkZGVuJyk7XG4gIH1cbn07XG5jb25zdCBlbmRHYW1lID0gKHdpbm5lcikgPT4ge1xuICBjb25zdCByZXN1bHRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51aS1tYXRjaFJlc3VsdCcpO1xuICByZXN1bHRFbC50ZXh0Q29udGVudCA9IHdpbm5lciA9PT0gJ3RpZScgPyAnVGllIScgOiBgJHt3aW5uZXJ9IHdpbnMhYDtcbiAgcmVzdWx0RWwuY2xhc3NMaXN0LnJlbW92ZSgndWktbWF0Y2hSZXN1bHQtaGlkZGVuJyk7XG4gIGNvbnN0IG5leHRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudWktbmV4dEJ1dHRvbicpO1xuICBuZXh0QnV0dG9uLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc3RhcnRUdXJuKTtcbiAgbmV4dEJ1dHRvbi50ZXh0Q29udGVudCA9ICdOZXcgZ2FtZT8nO1xuICBuZXh0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgcmVzdGFydEdhbWUsIHsgb25jZTogdHJ1ZSB9KTtcbn07XG5jb25zdCByZXN0YXJ0R2FtZSA9ICgpID0+IHtcbiAgbGV0IHBsYXllclR5cGVUb2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpLXBsYXllclR5cGVDaGVja2JveCcpO1xuICBjb25zdCBwbGF5ZXJUeXBlcyA9IFtwbGF5ZXJUeXBlVG9nZ2xlc1swXS5jaGVja2VkLCBwbGF5ZXJUeXBlVG9nZ2xlc1sxXS5jaGVja2VkXTtcbiAgZGVsZXRlRE9NRWxlbWVudHMoKTtcbiAgc2V0dXBHYW1lKCk7XG4gIHBsYXllclR5cGVUb2dnbGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnVpLXBsYXllclR5cGVDaGVja2JveCcpO1xuICBwbGF5ZXJUeXBlVG9nZ2xlcy5mb3JFYWNoKCh0b2dnbGUsIGluZGV4KSA9PiB7XG4gICAgaWYgKHBsYXllclR5cGVzW2luZGV4XSkge1xuICAgICAgdG9nZ2xlLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgW3AxLCBwMl1baW5kZXhdLnRvZ2dsZVBsYXllckNvbnRyb2xsZXIoKTtcbiAgICB9XG4gIH0pO1xuICBoYW5kbGVQbGF5ZXJUeXBlVG9nZ2xlcygpO1xufTtcbmNvbnN0IGRlbGV0ZURPTUVsZW1lbnRzID0gKCkgPT4ge1xuICBjb25zdCBjb250ZW50ID0gW1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYW1lLWNvbnRhaW5lcicpLFxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy51aS1jb250YWluZXInKSxcbiAgXTtcbiAgY29udGVudC5mb3JFYWNoKChpdGVtKSA9PiBpdGVtLnJlbW92ZSgpKTtcbn07XG5jb25zdCBnZXRBbGxTcGFjZUVsZW1lbnRzID0gKGdyaWRFbGVtZW50KSA9PiB7XG4gIGNvbnN0IHNwYWNlRWxlbWVudHMgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCAxMDsgbisrKSB7XG4gICAgICBzcGFjZUVsZW1lbnRzLnB1c2goXG4gICAgICAgIGdyaWRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC5ncmlkLXNwYWNlW2RhdGEtcm93PVwiJHtpfVwiXVtkYXRhLWNvbD1cIiR7bn1cIl1gKVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHNwYWNlRWxlbWVudHM7XG59O1xuXG5leHBvcnQge1xuICBzZXR1cEdhbWUsXG4gIGhhbmRsZVBsYXllclR5cGVUb2dnbGVzLFxuICBjcmVhdGVHcmlkLFxuICBkaXNwbGF5U2hpcHNPbkdyaWQsXG4gIGRpc3BsYXlIaXRzLFxuICBhZGRBdHRhY2tMaXN0ZW5lcnMsXG4gIGVuYWJsZU5leHRUdXJuQnV0dG9uLFxuICBsYXVuY2hBdHRhY2ssXG4gIGNyZWF0ZU5hbWVFbGVtZW50cyxcbn07XG4iLCJpbXBvcnQgJy4vc3R5bGVzL3N0eWxlLmNzcyc7XG5pbXBvcnQgKiBhcyB2aWV3IGZyb20gJy4vbXZjL3ZpZXcnO1xuXG52aWV3LnNldHVwR2FtZSgpO1xudmlldy5oYW5kbGVQbGF5ZXJUeXBlVG9nZ2xlcygpO1xuIl0sIm5hbWVzIjpbIl9fX0NTU19MT0FERVJfRVhQT1JUX19fIiwicHVzaCIsIm1vZHVsZSIsImlkIiwib3B0aW9ucyIsInN0eWxlVGFnVHJhbnNmb3JtIiwic2V0QXR0cmlidXRlcyIsImluc2VydCIsImRvbUFQSSIsImluc2VydFN0eWxlRWxlbWVudCIsInBsYWNlQWxsU2hpcHMiLCJwbGF5ZXIiLCJzaGlwcyIsImZvckVhY2giLCJzaGlwIiwiYXNzaWduU2hpcE9yaWVudGF0aW9uIiwicmFuZG9tbHlQbGFjZVNoaXAiLCJjb29yZHMiLCJnZXRSYW5kb21Db29yZGluYXRlcyIsImFyZVNwYWNlc0F2YWlsYWJsZUZvclNoaXAiLCJnYW1lYm9hcmQiLCJwbGFjZVNoaXAiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJ0dXJuU2hpcCIsInkiLCJ4Iiwicm93IiwiY29sIiwiZ3JpZCIsImkiLCJsZW5ndGgiLCJpc0hvcml6b250YWwiLCJwaWNrQ29tcHV0ZXJNb3ZlIiwicGFzdE1vdmVzIiwiZW5lbXkiLCJsYXN0TW92ZUxvYyIsImxhc3RUYXJnZXQiLCJ0YXJnZXRCZWZvcmVMYXN0IiwiaXNTdW5rIiwiaGFzQmVlbkhpdCIsInNoaWZ0IiwiZmluZERpcmVjdGlvbmFsSW5jcmVtZW50IiwibWFwIiwibnVtIiwibW92ZXNBcnJheVdpdGhvdXRMYXN0TW92ZSIsImZpbHRlciIsIm1vdmUiLCJpbmQiLCJuIiwibGFzdE1vdmUiLCJtb3ZlQmVmb3JlTGFzdCIsIlNoaXAiLCJuYW1lIiwiaGl0U3BhY2VzIiwiY29vcmRpbmF0ZXMiLCJoaXQiLCJwb3NpdGlvbiIsImluZGV4T2YiLCJQbGF5ZXIiLCJyZWNlaXZlQXR0YWNrIiwidGFyZ2V0IiwiYWxsU2hpcHNBcmVTdW5rIiwic3BhY2UiLCJldmVyeSIsIkdhbWVib2FyZCIsImlzSHVtYW4iLCJjdXJyZW50VHVybiIsIm1vdmVzIiwidG9nZ2xlUGxheWVyQ29udHJvbGxlciIsImNoYW5nZVR1cm4iLCJhdHRhY2siLCJwMSIsInAyIiwic2V0dXBHYW1lIiwicDFHcmlkIiwiY3JlYXRlR3JpZCIsInAyR3JpZCIsInVpQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiZ2FtZUNvbnRhaW5lciIsImFwcGVuZCIsImRpc3BsYXlTaGlwc09uR3JpZCIsIm5leHRCdXR0b24iLCJjcmVhdGVOZXh0VHVybkJ1dHRvbiIsImNyZWF0ZU5hbWVFbGVtZW50cyIsImNyZWF0ZUF0dGFja1Jlc3VsdCIsImNyZWF0ZU1hdGNoUmVzdWx0IiwiYm9keSIsImFzc2lnbkFsbFNoaXBTcGFjZXNDbGFzcyIsImFkZEF0dGFja0xpc3RlbmVycyIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdGFydFR1cm4iLCJncmlkT3V0ZXJDb250YWluZXIiLCJncmlkSW5uZXJDb250YWluZXIiLCJudW1BcnJheSIsIkFycmF5Iiwia2V5cyIsInNwbGljZSIsImNoYXJBcnJheSIsImZyb20iLCJfIiwibG9jIiwiU3RyaW5nIiwiZnJvbUNoYXJDb2RlIiwiY2hhckNvZGVBdCIsInNwYWNlQ29udGVudCIsInRleHRDb250ZW50IiwiZGF0YXNldCIsImdyaWRFbGVtZW50IiwicEdyaWQiLCJkaXNwbGF5T25lU2hpcCIsInNoaXBTcGFjZSIsInF1ZXJ5U2VsZWN0b3IiLCJzaGlwU3BhY2VDb250ZW50IiwicmVtb3ZlIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJncmlkRWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwicGxheWVyR3JpZHMiLCJpbmRleCIsInBsYXllck5hbWVzRWxlbWVudCIsIm5hbWVFbGVtZW50IiwicGxheWVyVHlwZUNvbnRhaW5lciIsInBsYXllclR5cGVMYWJlbCIsInNldEF0dHJpYnV0ZSIsInR5cGVUb2dnbGUiLCJ0eXBlIiwiaGFuZGxlUGxheWVyVHlwZVRvZ2dsZXMiLCJ0eXBlVG9nZ2xlcyIsIm9yaWdpbmFsU2V0dGluZ3MiLCJjaGVja2VkIiwib3JpZ2luYWxCdXR0b25UZXh0IiwiaXNCdXR0b25VbmNsaWNrYWJsZSIsInRvZ2dsZSIsImNvbnRhaW5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInJlc3RhcnRHYW1lIiwiYnRuIiwicmVzdWx0Q29udGFpbmVyIiwicmVzdWx0IiwicmVzdWx0RWwiLCJncmlkMSIsImdyaWQyIiwibmFtZUVsZW1lbnRzIiwidG9nZ2xlU2hpcFZpc2liaWxpdHkiLCJjdXJyZW50UGxheWVyIiwiZW5lbXlHcmlkIiwiY3VycmVudEVuZW15IiwidGFyZ2V0U3BhY2UiLCJzZXRUaW1lb3V0IiwiYXR0YWNrSGFuZGxlciIsInBsYXllcnMiLCJwIiwiZ2V0QWxsU3BhY2VFbGVtZW50cyIsImUiLCJwcmV2ZW50RGVmYXVsdCIsIm9uY2UiLCJzdWNjZXNzZnVsQXR0YWNrIiwibGF1bmNoQXR0YWNrIiwiZGlzcGxheU5ld0hpdCIsImRpc3BsYXlBdHRhY2tSZXN1bHQiLCJwMVN1Y2Nlc3MiLCJwMlN1Y2Nlc3MiLCJlbmRHYW1lIiwib3JpZW50YXRpb24iLCJzdW5rU3BhY2UiLCJ3aW5uZXIiLCJwbGF5ZXJUeXBlVG9nZ2xlcyIsInBsYXllclR5cGVzIiwiZGVsZXRlRE9NRWxlbWVudHMiLCJpdGVtIiwic3BhY2VFbGVtZW50cyJdLCJzb3VyY2VSb290IjoiIn0=